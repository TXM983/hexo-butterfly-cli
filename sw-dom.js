document.addEventListener("DOMContentLoaded",(()=>{if(!navigator.serviceWorker?.controller)return;const e=e=>{const t=e.endsWith("js")?"script":"link",o="link"===t?"href":"src";for(let n of document.getElementsByTagName(t)){const r=n[o];if(e.length>r?e.endsWith(r):r.endsWith(e)){const e=document.createElement(t),o=n.text||n.textContent||n.innerHTML||"";return Array.from(n.attributes).forEach((t=>e.setAttribute(t.name,t.value))),e.appendChild(document.createTextNode(o)),n.parentNode.replaceChildren(e,n),!0}}},t="updated",o=()=>{caches.match("https://id.v3/").then((function(e){e?e.json().then((function(e){new Vue({data:function(){this.$notify({title:"é€šçŸ¥ðŸ“¢",message:"å½“å‰å·²ä¸ºæ‚¨æ›´æ–°åˆ°æœ€æ–°çš„ç¼“å­˜ï¼è‹¥é¡µé¢å†…å®¹å¼‚å¸¸ï¼Œè¯·å¼ºåˆ¶åˆ·æ–°ï¼",position:"top-left",offset:50,showClose:!0,type:"success",duration:5e3})}}),setTimeout(console.log.bind(console,`\n %c é€šçŸ¥ðŸ“¢ %c å·²åˆ·æ–°Service Workerç¼“å­˜ %c å½“å‰ç‰ˆæœ¬: ${e.local.toString().length>=3?e.local.toString().slice(0,-2)+"."+e.local.toString().slice(-2):e.global+"."+e.local} \n`,"color: #ffffff; background: linear-gradient(90deg, #ff4b1f, #ff9068); padding:5px 0; border-radius: 5px;","color: #ffffff; background: linear-gradient(90deg, #11998e, #38ef7d); padding:5px 0; border-radius: 5px;","color: #000000; background: #f5f7fa; padding:5px 0; border-radius: 5px;"),1e3)})):console.info("æœªæ‰¾åˆ°åŒ¹é…çš„ç¼“å­˜å“åº”")})).catch((function(e){console.error("ç¼“å­˜åŒ¹é…å‡ºé”™:",e)}))};var n;sessionStorage.getItem(t)?(o(),sessionStorage.removeItem(t)):(n="update",navigator.serviceWorker.controller.postMessage(n)),navigator.serviceWorker.addEventListener("message",(n=>{const r=n.data;sessionStorage.setItem(t,r.type);const s=r.list?.filter((e=>/\.(js|css)$/.test(e)));if(s)window.Pjax?.isSupported?.()&&s.forEach(e),location.reload();else{const e=r.new,n=r.old;!n||e.global===n.global&&e.local===n.local||o(),sessionStorage.removeItem(t)}}))}));