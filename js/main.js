document.addEventListener("DOMContentLoaded",(function(){let e,t,n=!1;const o=n=>{const o=e=>Array.from(e).reduce(((e,t)=>e+t.offsetWidth),0);if(n){const n=o(document.querySelector("#nav > #blog_name").children),i=o(document.querySelector("#nav > .menus_items").children),s=o(document.querySelector("#nav > #nav-right").children);e=n+i+s,t=document.getElementById("nav")}const i=window.innerWidth<=800||e>t.offsetWidth-120;t.classList.toggle("hide-menu",i)},i=()=>{btf.overflowPaddingR.add(),btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),n=!0},s=()=>{btf.overflowPaddingR.remove(),btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),n=!1},c=()=>{const e=GLOBAL_CONFIG.highlight;if(!e)return;const{highlightCopy:t,highlightLang:n,highlightHeightLimit:o,highlightFullpage:i,highlightMacStyle:s,plugin:c}=e,l=GLOBAL_CONFIG_SITE.isHighlightShrink,a=t||n||void 0!==l||i||s,r="highlight.js"===c?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!a&&!o||!r.length)return;const d="prismjs"===c,u=!0===l?"closed":"",m=void 0!==l?'<i class="fas fa-angle-down expand"></i>':"",g=t?'<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>':"",f=i?'<i class="fa-solid fa-up-right-and-down-left-from-center fullpage-button"></i>':"",h=(e,t)=>{void 0!==GLOBAL_CONFIG.Snackbar||(e.textContent=t,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),800))},p=(e,t)=>{const n=e.parentNode;n.classList.add("copy-true");const o=d?"pre code":"table .code pre",i=n.querySelector(o);i&&((async(e,t)=>{try{await navigator.clipboard.writeText(e),h(t,GLOBAL_CONFIG.copy.success)}catch(e){console.error("Failed to copy: ",e),h(t,GLOBAL_CONFIG.copy.noSupport)}})(i.innerText,t.previousElementSibling),n.classList.remove("copy-true"))},b=e=>{const t=e.target.classList,n=e.currentTarget;t.contains("expand")?n.classList.toggle("closed"):t.contains("copy-button")?p(n,e.target):t.contains("fullpage-button")&&((e,t)=>{const n=e.closest("figure.highlight").classList.toggle("code-fullpage");document.body.style.overflow=n?"hidden":"",t.classList.toggle("fa-down-left-and-up-right-to-center",n),t.classList.toggle("fa-up-right-and-down-left-from-center",!n)})(n,e.target)},y=e=>e.currentTarget.classList.toggle("expand-done"),v=(e,t)=>{const n=document.createDocumentFragment();if(a){const t=document.createElement("div");t.className=`highlight-tools ${u}`,t.innerHTML='<div class="macStyle"><div class="mac-close"></div><div class="mac-minimize"></div><div class="mac-maximize"></div></div>'+m+e+g+f,btf.addEventListenerPjax("click",t,b),n.appendChild(t)}if(o&&(e=>{const t=new Map;(()=>{let n=e;for(;n!==document.body&&null!=n;)"none"===window.getComputedStyle(n).display&&t.set(n,n.getAttribute("style")||""),n=n.parentNode;const o="visibility: hidden !important; display: block !important;";t.forEach(((e,t)=>{t.setAttribute("style",e?e+";"+o:o)}))})();const n=e.offsetHeight;return t.forEach(((e,t)=>{""===e?t.removeAttribute("style"):t.setAttribute("style",e)})),n})(t)>o+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',btf.addEventListenerPjax("click",e,y),n.appendChild(e)}d?t.parentNode.insertBefore(n,t):t.insertBefore(n,t.firstChild)};r.forEach((e=>{let t="";d&&btf.wrap(e,"figure",{class:"highlight"}),n?(d?t=e.getAttribute("data-language")||"Code":(t=e.getAttribute("class").split(" ")[1],"plain"!==t&&void 0!==t||(t="Code")),v(`<div class="code-lang">${t}</div>`,e)):v("",e)}))};const l=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){return console.error("Failed to fetch URL:",e),[]}},a=(e,t,n)=>{const{isButton:o,limit:i,firstLimit:s,tabs:c}=n,l=t.length,a=Math.ceil((l-s)/i+1),r=new InfiniteGrid.JustifiedInfiniteGrid(e,{gap:5,isConstantSize:!0,sizeRange:[150,700],useResizeObserver:!0,observeChildren:!0,useTransform:!0});let d=!1;const u=e=>e&&e.replace(/"/g,"&quot;")||"",m=e=>{const t=e.alt?`alt="${u(e.alt)}"`:"",n=e.title?`title="${u(e.title)}"`:"";return`<div class="item">\n        <img src="${e.url}" data-grid-maintained-target="true" ${t} ${n} />\n      </div>`},g=(e,n,o)=>{r.append(((e,n,o=!1)=>{const i=o?(e-1)*n:(e-2)*n+s;return t.slice(i,i+n).map(m)})(e,n,o),e)},f=t=>{if(c){const t=e.parentNode;d&&(t.style.visibility="visible"),0===e.offsetHeight&&(t.style.visibility="hidden",d=!0)}const{updated:n,isResize:s,mounted:l}=t;if(n.length&&l.length&&!s){if(btf.loadLightbox(e.querySelectorAll("img:not(.medium-zoom-image)")),r.getGroups().length===a)return btf.setLoading.remove(e),void(!c&&r.off("renderComplete",f));o&&(btf.setLoading.remove(e),(e=>{const t=document.createElement("button");t.innerHTML=`${GLOBAL_CONFIG.infinitegrid.buttonText}<i class="fa-solid fa-arrow-down"></i>`,t.addEventListener("click",(()=>{t.remove(),btf.setLoading.add(e),g(r.getGroups().length+1,i)}),{once:!0}),e.insertAdjacentElement("afterend",t)})(e))}},h=btf.debounce((e=>{const t=(+e.groupKey||0)+1;1===t?g(t,s,!0):g(t,i),t===a&&r.off("requestAppend",h)}),300);btf.setLoading.add(e),r.on("renderComplete",f),o?g(1,s,!0):(r.on("requestAppend",h),r.renderItems()),btf.addGlobalFn("pjaxSendOnce",(()=>r.destroy()))},r=async(e,t=!1)=>{if(!e.length)return;const n=async()=>{for(const n of e){if(btf.isHidden(n)||n.classList.contains("loaded"))continue;const e={isButton:"true"===n.getAttribute("data-button"),limit:parseInt(n.getAttribute("data-limit"),10),firstLimit:parseInt(n.getAttribute("data-first"),10),tabs:t},o=n.firstElementChild,i=o.textContent;o.textContent="",n.classList.add("loaded");try{const t="url"===n.getAttribute("data-type")?await l(i):JSON.parse(i);a(o,t,e)}catch(e){console.error("Gallery data parsing failed:",e)}}};"function"==typeof InfiniteGrid||await getScript(GLOBAL_CONFIG.infinitegrid.js),await n()},d=()=>{let e=0,t="",n=-1;const o=document.getElementById("page-header"),i=document.getElementById("rightside"),s=document.getElementById("fps"),c=document.getElementById("name-container"),l=document.getElementsByClassName("menus_items"),a=document.getElementById("page-name"),r=document.querySelector("#go-up"),d=document.getElementById("nav"),u=()=>{"/life/music/"!==window.location.pathname&&requestAnimationFrame((()=>{g(o,"nav-fixed"),"block"===localStorage.getItem("rs")&&g(i,"rightside-show"),"1"===localStorage.getItem("fpson")&&g(s,"fps-show")}))},m=()=>{f(o,"nav-fixed"),f(o,"nav-visible"),f(i,"rightside-show"),f(s,"fps-show")},g=(e,t)=>{e&&(e.classList.contains(t)||e.classList.add(t))},f=(e,t)=>{e&&e.classList.contains(t)&&e.classList.remove(t)},h=i=>{const s=Math.abs(i-e),a=i>e;e=i,i>60?(""===t&&u(),s>10&&(a&&"down"!==t?(f(o,"nav-visible"),f(c,"visible"),g(l[1],"visible"),t="down"):a||"up"===t||(g(o,"nav-visible"),g(c,"visible"),f(l[1],"visible"),t="up"))):(t="",i<=5&&m(),g(c,"visible"),f(l[1],"visible")),requestAnimationFrame((()=>{(e=>{if(!r||r.children.length<2)return;const t=btf.getScrollPercent(e,document.body);if(t!==n){n=t;const e=r.children[0],o=r.children[1];t<95?("none"!==e.style.display&&(e.style.display="none"),"block"!==o.style.display&&(o.style.display="block"),o.firstChild.textContent=t):("none"!==o.style.display&&(o.style.display="none"),"block"!==e.style.display&&(e.style.display="block"))}})(i),btf.rmf.showRightMenu(!1);const e=document.querySelector(".rmMask");e&&(e.style.display="none")}))},p=btf.throttle((()=>{const e=window.scrollY||document.documentElement.scrollTop;h(e)}),100);(window.scrollY||document.documentElement.scrollTop)>60?u():(m(),d.classList.add("show")),a.innerText=document.title.split(" | MuXiaoChenðŸŠ")[0],btf.addEventListenerPjax("scroll",window,p,{passive:!0})},u=btf.debounce((()=>{btf.$notify("å“Žå˜¿ï¼å¤åˆ¶æˆåŠŸðŸ¬","è‹¥è¦è½¬è½½æœ€å¥½ä¿ç•™åŽŸæ–‡é“¾æŽ¥å“¦ï¼Œç»™ä½ ä¸€ä¸ªå¤§å¤§çš„èµžï¼","success",2e3)}),500),m=btf.debounce((e=>{(e=>{const t=["F12","I","J","C","U"];return t.includes(e.key)&&("F12"===e.key||e.ctrlKey&&e.shiftKey&&t.slice(1,4).includes(e.key)||e.ctrlKey&&"U"===e.key)})(e)&&btf.$notify("ä½ å·²è¢«å‘çŽ°ðŸ˜œ","å°ä¼™å­ï¼Œæ‰’æºè®°ä½è¦éµå¾ªGPLåè®®ï¼","warning",2e3)}),500),g=document.title,f=()=>{let e;document.hidden?(document.title="ðŸ‘€è·‘å“ªé‡ŒåŽ»äº†~",clearTimeout(e)):(document.title="ðŸ–æŠ“åˆ°ä½ å•¦ï½ž",e=setTimeout((()=>{document.title=g}),2e3))},h=btf.throttle((()=>{btf.checkWidth()}),500),p=e=>{e.preventDefault();const t=document.querySelector("#post-comment");t&&t.scrollIntoView({behavior:"smooth"})},b=()=>{let e=window.location.hash;if(!e)return;e=e.slice(1);const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},y=function(){const e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor,n=document.getElementById("article-container");if(!n||!e&&!t)return;let o,i,s,c,l;if(e){const e=document.getElementById("card-toc");i=e.querySelector(".toc-content"),o=i.querySelectorAll(".toc-link"),c=e.querySelector(".toc-percentage"),l=i.classList.contains("is-expand");const t=t=>{const n=t.target.closest(".toc-link");if(!n)return;t.preventDefault();const o=document.getElementById(decodeURI(n.getAttribute("href")).replace("#",""));if(!o)return;let i=btf.getEleTop(o);window.scrollY<i&&(i-=70),btf.scrollToDest(i,300),window.innerWidth<900&&e.classList.remove("open")};btf.addEventListenerPjax("click",i,t),s=e=>{const t=i.clientHeight,n=e.offsetTop,o=e.clientHeight,s=i.scrollTop,c=n-s,l=(t-o)/2;c!==l&&(i.scrollTop=s+(c-l))}}const a=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let r="";const d=btf.throttle((function(){const d=window.scrollY||document.documentElement.scrollTop;e&&GLOBAL_CONFIG.percent.toc&&(c.textContent=btf.getScrollPercent(d,n)),(n=>{if(0===n)return!1;let c="",d="";for(let e=0;e<a.length;e++){const t=a[e];if(!(n>btf.getEleTop(t)-80))break;{const n=t.id;c=n?"#"+encodeURI(n):"",d=e}}if(r!==d&&(t&&btf.updateAnchor(c),r=d,e&&(i.querySelectorAll(".active").forEach((e=>e.classList.remove("active"))),c))){const e=o[d];if(e.classList.add("active"),setTimeout((()=>s(e)),0),!l){let t=e.parentNode;for(;!t.matches(".toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode}}})(d)}),100);btf.addEventListenerPjax("scroll",window,d,{passive:!0})},v=e=>{const t=document.getElementById("rightside-config-hide").classList;t.toggle("show"),e.classList.contains("show")&&(t.add("status"),setTimeout((()=>{t.remove("status")}),300)),e.classList.toggle("show")},L=()=>{const e=document.getElementById("rightside"),t=document.getElementById("fps");e&&!e.classList.contains("rightside-show")&&e.classList.add("rightside-show"),t&&!t.classList.contains("fps-show")&&t.classList.add("fps-show"),btf.scrollToDest(document.body.scrollHeight,500)},w=(e,t)=>{const n=document.getElementById("card-toc");n.style.transition="transform 0.3s ease-in-out";const o=n.clientHeight,i=t.getBoundingClientRect(),s=window.innerHeight-i.bottom-30;o>s&&(n.style.transformOrigin=`right ${o-s-i.height/2}px`),n.classList.toggle("open"),n.addEventListener("transitionend",(()=>{n.style.cssText=""}),{once:!0})};document.getElementById("rightside")?.addEventListener("click",(function(e){const t=e.target.id?e.target:e.target.parentNode;switch(t.id){case"go-up":btf.rmf.scrollToTop();break;case"rightside_config":v(t);break;case"mobile-toc-button":w(e.currentTarget,t);break;case"readmode":btf.rmf.switchReadMode();break;case"go-down":L()}}));const E=()=>{const e=document.querySelectorAll("#article-container .tabs");if(0===e.length)return;const t=(e,t)=>{e.forEach(((e,n)=>{e.classList.toggle("active",n===t)}))},n=e=>{const n=e.target.closest("button");if(!n||n.classList.contains("active"))return;const o=[...e.currentTarget.querySelectorAll("button")],i=[...e.currentTarget.closest(".tabs").querySelectorAll(".tab-contents > .tab-item-content")],s=o.indexOf(n);-1!==s&&(t(o.map((e=>e.parentElement)),s),t(i,s),e.currentTarget.classList.remove("no-default"),r(i[s].querySelectorAll(".gallery-container"),!0))};e.forEach((e=>{const t=e.querySelector(".nav-tabs"),o=e.querySelectorAll(".tab-to-top");t&&btf.addEventListenerPjax("click",t,n),o.length>0&&btf.addEventListenerPjax("click",o,(e=>t=>{t.target.closest("button")&&btf.scrollToDest(btf.getEleTop(e),300)})(e))}))},I=e=>{e.forEach((e=>{e.textContent=btf.diffDate(e.getAttribute("datetime"),!0),e.style.display="inline"}))},k=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent),A=()=>k||document.body.clientWidth<800,S=e=>{if("on"!==localStorage.getItem("mouse")||A())return!0;const t=document.querySelector("#rightMenu");document.querySelectorAll(".rightMenu-group.hide").forEach((e=>{e.style.display="none"}));const n=e.target;n instanceof HTMLElement&&n.focus?.();const o=window.getSelection();let i="";o&&(o.isCollapsed?o.removeAllRanges():i=o.toString().trim()),e.preventDefault(),i&&(document.getElementById("menu-text").style.display="block"),(document.getElementById("post")||document.getElementById("page"))&&(document.getElementById("menu-post").style.display="block");/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+/.test(i)&&"A"!==n.tagName&&(document.querySelector("#menu-too").style.display="block");const s=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)};"A"===n.tagName?(document.querySelector("#menu-to").style.display="block",btf.rmf.open=()=>{!n.href.startsWith("http")||n.href.includes("yisous.xyz")?pjax.loadUrl(n.href):location.href=n.href},btf.rmf.openWithNewTab=()=>window.open(n.href),btf.rmf.copyLink=()=>s(n.href)):"IMG"===n.tagName?(document.querySelector("#menu-img").style.display="block",btf.rmf.openWithNewTab=()=>window.open(n.src),btf.rmf.click=()=>n.click(),btf.rmf.copyLink=()=>s(n.src),btf.rmf.saveAs=()=>{fetch(n.src,{mode:"cors"}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n.src.split("/").pop(),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)})).catch((e=>{console.error("å›¾ç‰‡ä¸‹è½½å¤±è´¥ï¼š",e)}))}):["TEXTAREA","INPUT"].includes(n.tagName)&&(document.querySelector("#menu-paste").style.display="block",btf.rmf.paste=()=>{navigator.permissions.query({name:"clipboard-read"}).then((e=>{["granted","prompt"].includes(e.state)?navigator.clipboard.readText().then((e=>((e,t)=>{if(document.selection){e.focus();const n=document.selection.createRange();n.text=t,n.select()}else if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,o=e.selectionEnd,i=e.scrollTop;e.value=e.value.slice(0,n)+t+e.value.slice(o),i>0&&(e.scrollTop=i),e.focus(),e.selectionStart=e.selectionEnd=n+t.length}else e.value+=t,e.focus()})(n,e))):btf.$notify("ç²˜è´´å¤±è´¥","è¯·å…è®¸è¯»å–å‰ªè´´æ¿ï¼","error",3e3)}))}),t.style.visibility="hidden",t.style.display="block";const c=t.offsetWidth,l=t.offsetHeight;let a=e.clientX+10,r=e.clientY+10;a+c>window.innerWidth&&(a=e.clientX-c-10,a<0&&(a=0)),r+l>window.innerHeight&&(r=e.clientY-l-10,r<0&&(r=0));const d=(()=>{document.getElementById("rightMenu").style.zIndex="19198";const e=document.querySelector(".rmMask");if(e)return e;const t=document.createElement("div");return t.className="rmMask",Object.assign(t.style,{width:`${window.innerWidth}px`,height:`${window.innerHeight}px`,background:"#fff",opacity:"0",position:"fixed",top:"0",left:"0",zIndex:998}),document.body.appendChild(t),t})(),u=document.querySelector(".rmMask");return x(d),btf.rmf.showRightMenu(!0,r,a),u.style.display="flex",!1},x=e=>{const t=document.querySelectorAll(".rightMenu-item"),n=document.querySelector(".rmMask"),o=()=>{btf.rmf.showRightMenu(!1),n&&(n.style.display="none")};if(t.length>0&&btf.addGlobalListener("click",t,o,"click-right-menu-items"),btf.addGlobalListener("resize",window,o,"resize-hide-right-menu"),e){const t=()=>{e.style.display="none"};btf.addGlobalListener("click",e,t,"click-mask")}},B=()=>{A()||(btf.addEventListenerPjax("contextmenu",window,S),btf.addEventListenerPjax("click",window,(()=>{btf.rmf.showRightMenu(!1)})))},C=()=>{c(),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach((e=>{const t=e.title||e.alt;if(!t)return;const n=document.createElement("div");n.className="img-alt text-center",n.textContent=t,e.insertAdjacentElement("afterend",n)})),r(document.querySelectorAll("#article-container .gallery-container")),btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),y(),(()=>{const e=document.querySelectorAll("#article-container table");e.length&&e.forEach((e=>{e.closest(".highlight")||btf.wrap(e,"div",{class:"table-wrap"})}))})(),(()=>{const e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach((e=>e.addEventListener("click",(e=>{const t=e.currentTarget;t.classList.add("open"),r(t.nextElementSibling.querySelectorAll(".gallery-container"))}),{once:!0})))})(),E()},G=async()=>{const e=[()=>btf.checkWidth(),()=>{window.addEventListener("resize",(()=>{o(!1),n&&btf.isHidden(document.getElementById("toggle-menu"))&&s()}))},()=>{const e=document.getElementById("menu-mask");e&&e.addEventListener("click",(()=>{s()}))},()=>(()=>{const e=document.querySelector("#sidebar-menus .menus_items");e&&e.addEventListener("click",(e=>{const t=e.target.closest(".site-page.group");t&&t.classList.toggle("hide")}))})(),()=>GLOBAL_CONFIG.copyright&&(()=>{const{limitCount:e,languages:t}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",(n=>{n.preventDefault();const o=window.getSelection(0).toString();let i=o;return o.length>e&&(i=`${o}\n\n\n${t.author}\n${t.link}${window.location.href}\n${t.source}\n${t.info}`),n.clipboardData?n.clipboardData.setData("text",i):window.clipboardData.setData("text",i)}))})(),()=>{setTimeout(console.log.bind(console,`\n %c MuXiaoChenðŸŠ %c ${btf.currentVersion} %c ${location.origin} \n`,"color: #ffffff; background: linear-gradient(90deg, #ff7e5f, #feb47b); padding:5px 0; border-radius: 5px;","color: #ffffff; background: linear-gradient(90deg, #6a11cb, #2575fc); padding:5px 0; border-radius: 5px;","color: #000000; background: #d4fc79; padding:5px 0; border-radius: 5px;"))}];await O(e,300).then((e=>{}))},O=(e,t=0)=>Promise.all(e.map((e=>new Promise((n=>{btf.runIdle((()=>{try{e()}catch(e){console.error(e)}n()}),t)}))))),T=async()=>{GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(()=>{const e=document.getElementById("post-outdate-notice");if(!e)return;const{limitDay:t,messagePrev:n,messageNext:o,postUpdate:i}=JSON.parse(e.getAttribute("data")),s=btf.diffDate(i);s>=t&&(e.textContent=`${n} ${s} ${o}`,e.hidden=!1)})(),GLOBAL_CONFIG.relativeDate.post&&I(document.querySelectorAll("#post-meta time"))):(GLOBAL_CONFIG.relativeDate.homepage&&I(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(()=>{const e=document.getElementById("runtimeshow");if(e){const t=e.getAttribute("data-publishDate");e.textContent=`${btf.diffDate(t)} ${GLOBAL_CONFIG.runtime}`}})(),(()=>{const e=document.getElementById("last-push-date");if(e){const t=e.getAttribute("data-lastPushDate");e.textContent=btf.diffDate(t,!0)}})(),(()=>{const e=document.querySelector("#aside-cat-list.expandBtn");if(!e)return;btf.addEventListenerPjax("click",e,(e=>{const t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))}),!0)})()),GLOBAL_CONFIG_SITE.isHome&&(()=>{const e=document.getElementById("scroll-down");e&&btf.addEventListenerPjax("click",e,(()=>{btf.scrollToDest(document.getElementById("home_top").offsetTop-60,300)}))})(),d(),btf.switchComments(document),C(),(()=>{const e=document.getElementById("toggle-menu");e&&btf.addEventListenerPjax("click",e,(()=>{i()}))})(),B(),b();[{event:"copy",selector:document,callback:u},{event:"keydown",selector:document,callback:m},{event:"visibilitychange",selector:document,callback:f},{event:"resize",selector:window,callback:h},{event:"click",selector:document.querySelectorAll('a[href="#post-comment"]'),callback:p},{event:"hashchange",selector:window,callback:b}].forEach((e=>{btf.addEventListenerPjax(e.event,e.selector,e.callback)}));const e=new btf.FpsMonitor;e.init(),btf.addGlobalFn("pjaxSendOnce",(()=>e.destroy()))},q=()=>{(()=>{const e=document.getElementById("modeiconT");if(e){const t="dark"===document.documentElement.getAttribute("data-theme")?"#icon-sun":"#icon-moon";e.getAttribute("xlink:href")!==t&&e.setAttribute("xlink:href",t)}})(),o(!0),T()};q(),GLOBAL_CONFIG.islazyloadPlugin&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),btf.addGlobalFn("pjaxComplete",(()=>{window.lazyLoadInstance.update()}),"lazyload")),G(),btf.addGlobalFn("pjaxComplete",q,"refreshFn")}));