document.addEventListener("DOMContentLoaded",(function(){let e,t,n=!1;const o=n=>{const o=e=>Array.from(e).reduce(((e,t)=>e+t.offsetWidth),0);if(n){const n=o(document.querySelector("#nav > #blog_name").children),i=o(document.querySelector("#nav > .menus_items").children),s=o(document.querySelector("#nav > #nav-right").children);e=n+i+s,t=document.getElementById("nav")}const i=window.innerWidth<=800||e>t.offsetWidth-120;t.classList.toggle("hide-menu",i)},i=()=>{btf.overflowPaddingR.add(),btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),n=!0},s=()=>{btf.overflowPaddingR.remove(),btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),n=!1},l=()=>{const e=GLOBAL_CONFIG.highlight;if(!e)return;const{highlightCopy:t,highlightLang:n,highlightHeightLimit:o,highlightFullpage:i,highlightMacStyle:s,plugin:l}=e,c=GLOBAL_CONFIG_SITE.isHighlightShrink,a=t||n||void 0!==c||i||s,r="highlight.js"===l?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!a&&!o||!r.length)return;const d="prismjs"===l,m=!0===c?"closed":"",u=void 0!==c?'<i class="fas fa-angle-down expand"></i>':"",g=t?'<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>':"",f=i?'<i class="fa-solid fa-up-right-and-down-left-from-center fullpage-button"></i>':"",h=(e,t)=>{void 0!==GLOBAL_CONFIG.Snackbar||(e.textContent=t,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),800))},p=(e,t)=>{const n=e.parentNode;n.classList.add("copy-true");const o=d?"pre code":"table .code pre",i=n.querySelector(o);i&&((async(e,t)=>{try{await navigator.clipboard.writeText(e),h(t,GLOBAL_CONFIG.copy.success)}catch(e){console.error("Failed to copy: ",e),h(t,GLOBAL_CONFIG.copy.noSupport)}})(i.innerText,t.previousElementSibling),n.classList.remove("copy-true"))},b=e=>{const t=e.target.classList,n=e.currentTarget;t.contains("expand")?n.classList.toggle("closed"):t.contains("copy-button")?p(n,e.target):t.contains("fullpage-button")&&((e,t)=>{const n=e.closest("figure.highlight").classList.toggle("code-fullpage");document.body.style.overflow=n?"hidden":"",t.classList.toggle("fa-down-left-and-up-right-to-center",n),t.classList.toggle("fa-up-right-and-down-left-from-center",!n)})(n,e.target)},y=e=>e.currentTarget.classList.toggle("expand-done"),L=(e,t)=>{const n=document.createDocumentFragment();if(a){const t=document.createElement("div");t.className=`highlight-tools ${m}`,t.innerHTML='<div class="macStyle"><div class="mac-close"></div><div class="mac-minimize"></div><div class="mac-maximize"></div></div>'+u+e+g+f,btf.addEventListenerPjax("click",t,b),n.appendChild(t)}if(o&&(e=>{const t=new Map;(()=>{let n=e;for(;n!==document.body&&null!=n;)"none"===window.getComputedStyle(n).display&&t.set(n,n.getAttribute("style")||""),n=n.parentNode;const o="visibility: hidden !important; display: block !important;";t.forEach(((e,t)=>{t.setAttribute("style",e?e+";"+o:o)}))})();const n=e.offsetHeight;return t.forEach(((e,t)=>{""===e?t.removeAttribute("style"):t.setAttribute("style",e)})),n})(t)>o+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',btf.addEventListenerPjax("click",e,y),n.appendChild(e)}d?t.parentNode.insertBefore(n,t):t.insertBefore(n,t.firstChild)};r.forEach((e=>{let t="";d&&btf.wrap(e,"figure",{class:"highlight"}),n?(d?t=e.getAttribute("data-language")||"Code":(t=e.getAttribute("class").split(" ")[1],"plain"!==t&&void 0!==t||(t="Code")),L(`<div class="code-lang">${t}</div>`,e)):L("",e)}))};const c=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){return console.error("Failed to fetch URL:",e),[]}},a=(e,t,n)=>{const{isButton:o,limit:i,firstLimit:s,tabs:l}=n,c=t.length,a=Math.ceil((c-s)/i+1),r=new InfiniteGrid.JustifiedInfiniteGrid(e,{gap:5,isConstantSize:!0,sizeRange:[150,700],useResizeObserver:!0,observeChildren:!0,useTransform:!0});let d=!1;const m=e=>e&&e.replace(/"/g,"&quot;")||"",u=e=>{const t=e.alt?`alt="${m(e.alt)}"`:"",n=e.title?`title="${m(e.title)}"`:"";return`<div class="item">\n        <img src="${e.url}" data-grid-maintained-target="true" ${t} ${n} />\n      </div>`},g=(e,n,o)=>{r.append(((e,n,o=!1)=>{const i=o?(e-1)*n:(e-2)*n+s;return t.slice(i,i+n).map(u)})(e,n,o),e)},f=t=>{if(l){const t=e.parentNode;d&&(t.style.visibility="visible"),0===e.offsetHeight&&(t.style.visibility="hidden",d=!0)}const{updated:n,isResize:s,mounted:c}=t;if(n.length&&c.length&&!s){if(btf.loadLightbox(e.querySelectorAll("img:not(.medium-zoom-image)")),r.getGroups().length===a)return btf.setLoading.remove(e),void(!l&&r.off("renderComplete",f));o&&(btf.setLoading.remove(e),(e=>{const t=document.createElement("button");t.innerHTML=`${GLOBAL_CONFIG.infinitegrid.buttonText}<i class="fa-solid fa-arrow-down"></i>`,t.addEventListener("click",(()=>{t.remove(),btf.setLoading.add(e),g(r.getGroups().length+1,i)}),{once:!0}),e.insertAdjacentElement("afterend",t)})(e))}},h=btf.debounce((e=>{const t=(+e.groupKey||0)+1;1===t?g(t,s,!0):g(t,i),t===a&&r.off("requestAppend",h)}),300);btf.setLoading.add(e),r.on("renderComplete",f),o?g(1,s,!0):(r.on("requestAppend",h),r.renderItems()),btf.addGlobalFn("pjaxSendOnce",(()=>r.destroy()))},r=async(e,t=!1)=>{if(!e.length)return;const n=async()=>{for(const n of e){if(btf.isHidden(n)||n.classList.contains("loaded"))continue;const e={isButton:"true"===n.getAttribute("data-button"),limit:parseInt(n.getAttribute("data-limit"),10),firstLimit:parseInt(n.getAttribute("data-first"),10),tabs:t},o=n.firstElementChild,i=o.textContent;o.textContent="",n.classList.add("loaded");try{const t="url"===n.getAttribute("data-type")?await c(i):JSON.parse(i);a(o,t,e)}catch(e){console.error("Gallery data parsing failed:",e)}}};"function"==typeof InfiniteGrid||await getScript(GLOBAL_CONFIG.infinitegrid.js),await n()},d=()=>{let e=0,t="",n=-1;const o=document.getElementById("page-header"),i=document.getElementById("rightside"),s=document.getElementById("fps"),l=document.getElementById("name-container"),c=document.getElementsByClassName("menus_items"),a=document.getElementById("page-name"),r=document.querySelector("#go-up"),d=document.getElementById("nav"),m=()=>{"/life/music/"!==window.location.pathname&&requestAnimationFrame((()=>{g(o,"nav-fixed"),"block"===localStorage.getItem("rs")&&g(i,"rightside-show"),"1"===localStorage.getItem("fpson")&&g(s,"fps-show")}))},u=()=>{f(o,"nav-fixed"),f(o,"nav-visible"),f(i,"rightside-show"),f(s,"fps-show")},g=(e,t)=>!e.classList.contains(t)&&e.classList.add(t),f=(e,t)=>e.classList.contains(t)&&e.classList.remove(t),h=i=>{const s=Math.abs(i-e),a=i>e;e=i,i>60?(m(),s>10&&(a&&"down"!==t?(f(o,"nav-visible"),f(l,"visible"),g(c[1],"visible"),t="down"):a||"up"===t||(g(o,"nav-visible"),g(l,"visible"),f(c[1],"visible"),t="up"))):(t="",i<=5&&u(),g(l,"visible"),f(c[1],"visible")),requestAnimationFrame((()=>{(e=>{if(!r||r.children.length<2)return;const t=btf.getScrollPercent(e,document.body);if(t!==n){n=t;const e=r.children[0],o=r.children[1];t<95?("none"!==e.style.display&&(e.style.display="none"),"block"!==o.style.display&&(o.style.display="block"),o.innerHTML=t+"<span>%</span>"):("none"!==o.style.display&&(o.style.display="none"),"block"!==e.style.display&&(e.style.display="block"))}})(i),btf.rmf.showRightMenu(!1);const e=document.querySelector(".rmMask");e&&(e.style.display="none")}))},p=btf.throttle((()=>{const e=window.scrollY||document.documentElement.scrollTop;h(e)}),100);btf.runIdle((()=>{(window.scrollY||document.documentElement.scrollTop)>60?m():(u(),d.classList.add("show")),a.innerText=document.title.split(" | MuXiaoChenðŸŠ")[0]}),100),btf.addEventListenerPjax("scroll",window,p,{passive:!0})},m=()=>{const e=(e,t,n,o)=>{const i=localStorage.getItem(e),s=Number(i);(null===i||""===i.trim()||isNaN(s)||s<t||s>n)&&localStorage.setItem(e,o)};[{key:"universe",list:["block","none"],def:"block"},{key:"snow",list:["block","none"],def:"none"},{key:"rs",list:["block","none"],def:"block"},{key:"mouse",list:["on","off"],def:"on"},{key:"light",list:["true","false"],def:"true"},{key:"aside",list:["1","0"],def:"1"},{key:"asidePos",list:["1","0"],def:"1"},{key:"nav",list:["1","0"],def:"0"},{key:"blur",list:["1","0"],def:"0"},{key:"fpson",list:["1","0"],def:"1"}].forEach((e=>((e,t,n)=>{const o=localStorage.getItem(e);t.includes(o)||localStorage.setItem(e,n)})(e.key,e.list,e.def))),e("transNum",0,100,"85"),e("blurRad",0,100,"20");const t=localStorage.getItem("font");"default"===t||["YSHST","MiSans","HYTMR","LXGW","TTQHB","Consolas_1","ZhuZiAWan"].includes(t)||localStorage.setItem("font","LXGW");const n=localStorage.getItem("themeColor");btf.map.has(n)||localStorage.setItem("themeColor","green");const o=document.getElementById("modeiconT");if(o){const e="dark"===document.documentElement.getAttribute("data-theme")?"#icon-sun":"#icon-moon";o.getAttribute("xlink:href")!==e&&o.setAttribute("xlink:href",e)}},u=()=>{const e=document.getElementById("global-font"),t=document.getElementById("defineBg"),n=document.getElementById("universe"),o=document.getElementById("snow"),i=document.getElementById("themeColor"),s=document.documentElement,l=document.getElementById("aside-pos"),c=document.getElementById("transPercent"),a=document.getElementById("bgFilterParam"),r=document.getElementById("site-name"),d=document.getElementById("site-title"),m=document.getElementById("site-subtitle"),u=document.getElementById("post-info"),g=document.getElementById("menu_shadow"),f=localStorage.getItem("universe"),h=localStorage.getItem("snow");n.style.display=f,o.style.display=h;try{const t=localStorage.getItem("font")||"LXGW";e.textContent="default"===t?":root{--global-font: -apple-system; }":`:root{--global-font: ${t}; }`}catch(t){console.error("Error accessing localStorage:",t),e.textContent=":root{--global-font: -apple-system; }"}try{const e=localStorage.getItem("themeColor")||"green",t=btf.map.get(e),n=t.slice(3,-1),o=`rgba${n}, 0.7)`,s=`rgba${n}, 0.5)`,l=`rgba${n}, 0.1)`;i.textContent=`:root{\n        --theme-color: ${t};\n        --text-bg-hover: ${o};\n        --high-trans-color: ${s};\n        --hh-trans-color: ${l};\n      }`}catch(e){console.log("Setting color exceptionï¼š",e)}s.classList.toggle("hide-aside","1"!==localStorage.getItem("aside")),s.classList.toggle("nav-sticky","1"===localStorage.getItem("nav"));const p=localStorage.getItem("asidePos");l.textContent="1"===p?":root{--first-child-order: 0; --recent-post-item-margin: 0 0 0 15px; --recent-post-item-margin-other: 0 0 0 15px; }":":root{--first-child-order: 2; --recent-post-item-margin: 0 15px 0 0; --recent-post-item-margin-other: 0 15px 0 0; }";const b=localStorage.getItem("transNum")||85;c.textContent=`:root {\n      --trans-light: rgba(253, 253, 253, ${b}% );\n      --trans-dark: rgba(20, 24, 30, ${b}% );\n      --trans-comment-dark: rgba(28, 32, 40, ${b}% );\n    }`;const y=localStorage.getItem("blurRad")||20;a.textContent=`:root {\n      --blur-num: blur(${y}px) saturate(120%) contrast(105%);\n    }`,s.classList.toggle("bg-filter","0"!==localStorage.getItem("blur"));const L=localStorage.getItem("blogbg")||"default";var w;"default"===L?(t.textContent=":root {\n          --default-bg: url(https://img.aimiliy.top/wallpaper?type=pc);\n          --darkmode-bg: url(https://img.aimiliy.top/wallpaper?type=pc);\n          --mobileday-bg: url(https://cdn.aimiliy.top/backImg/418aa5a692048078aec56e073ed15e8849ff99a012daa8-4Bc9wf.webp);\n          --mobilenight-bg: url(https://cdn.aimiliy.top/backImg/20191012131221_mTGle.webp);\n      }",localStorage.setItem("blogbg","default")):(w=L,t.textContent=`:root {\n          --default-bg: ${w};\n          --darkmode-bg: ${w};\n          --mobileday-bg: ${w};\n          --mobilenight-bg: ${w};\n      }`);const v="true"===localStorage.getItem("light");[{el:r,animLight:"light_15px 10s linear infinite"},{el:d,animLight:"light_15px 10s linear infinite"},{el:m,animLight:"light_10px 10s linear infinite"},{el:u,animLight:"light_5px 10s linear infinite"}].forEach((({el:e,animLight:t})=>{e&&(e.style.animation=v?t:"none")})),g.textContent=v?":root{--menu-shadow: 0 0 1px var(--theme-color);}":":root{--menu-shadow: none;}"},g=async()=>{const e=localStorage.getItem("MuXiaoChenVersion");if(((e,t)=>null===t||t!==e)(btf.currentVersion,e))return localStorage.clear(),localStorage.setItem("MuXiaoChenVersion",btf.currentVersion),btf.initItem({id:"7397995017",type:"playlist",server:"tencent"}),await new Promise((e=>{setTimeout((()=>{btf.$notify("æç¤ºðŸ’","(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾žç”±äºŽç½‘ç«™éƒ¨åˆ†è®¾ç½®åŠŸèƒ½æ›´æ–°ï¼Œå½“å‰å·²ä¸ºæ‚¨é‡ç½®æ‰€æœ‰è®¾ç½®ï¼Œç¥æ‚¨æ„‰å¿«ï¼","warning",5e3),e()}),500)}));m()},f=btf.debounce((()=>{btf.$notify("å“Žå˜¿ï¼å¤åˆ¶æˆåŠŸðŸ¬","è‹¥è¦è½¬è½½æœ€å¥½ä¿ç•™åŽŸæ–‡é“¾æŽ¥å“¦ï¼Œç»™ä½ ä¸€ä¸ªå¤§å¤§çš„èµžï¼","success",3e3)}),500,!0),h=btf.debounce((e=>{(e=>{const t=["F12","I","J","C","U"];return t.includes(e.key)&&("F12"===e.key||e.ctrlKey&&e.shiftKey&&t.slice(1,4).includes(e.key)||e.ctrlKey&&"U"===e.key)})(e)&&btf.$notify("ä½ å·²è¢«å‘çŽ°ðŸ˜œ","å°ä¼™å­ï¼Œæ‰’æºè®°ä½è¦éµå¾ªGPLåè®®ï¼","warning",3e3)}),500,!0),p=btf.throttle((()=>{btf.checkWidth()}),300),b=document.querySelectorAll('a[href="#post-comment"]'),y=()=>{let e=window.location.hash;if(!e)return;e=e.slice(1);const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},L=[{event:"copy",selector:document,callback:f},{event:"keydown",selector:document,callback:h},{event:"visibilitychange",selector:document,callback:()=>{let e;document.hidden?(document.title="ðŸ‘€è·‘å“ªé‡ŒåŽ»äº†~",clearTimeout(e)):(document.title="ðŸ–æŠ“åˆ°ä½ å•¦ï½ž",e=setTimeout((()=>{document.title="MuXiaoChenðŸŠ"}),2e3))}},{event:"resize",selector:window,callback:p},{event:"click",selector:b,callback:e=>{e.preventDefault();const t=document.querySelector("#post-comment");t&&t.scrollIntoView({behavior:"smooth"})}},{event:"hashchange",selector:window,callback:y}],w=function(){const e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor,n=document.getElementById("article-container");if(!n||!e&&!t)return;let o,i,s,l,c;if(e){const e=document.getElementById("card-toc");i=e.querySelector(".toc-content"),o=i.querySelectorAll(".toc-link"),l=e.querySelector(".toc-percentage"),c=i.classList.contains("is-expand");const t=t=>{const n=t.target.closest(".toc-link");if(!n)return;t.preventDefault();let o=btf.getEleTop(document.getElementById(decodeURI(n.getAttribute("href")).replace("#","")));window.scrollY<o&&(o-=70),btf.scrollToDest(o,300),window.innerWidth<900&&e.classList.remove("open")};btf.addEventListenerPjax("click",i,t),s=e=>{const t=i.clientHeight,n=e.offsetTop,o=e.clientHeight,s=i.scrollTop,l=n-s,c=(t-o)/2;l!==c&&(i.scrollTop=s+(l-c))},i.style.display="block"}const a=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let r="";const d=btf.throttle((function(){const d=window.scrollY||document.documentElement.scrollTop;e&&GLOBAL_CONFIG.percent.toc&&(l.textContent=btf.getScrollPercent(d,n)),(n=>{if(0===n)return!1;let l="",d="";for(let e=0;e<a.length;e++){const t=a[e];if(!(n>btf.getEleTop(t)-80))break;{const n=t.id;l=n?"#"+encodeURI(n):"",d=e}}if(r!==d&&(t&&btf.updateAnchor(l),r=d,e&&(i.querySelectorAll(".active").forEach((e=>e.classList.remove("active"))),l))){const e=o[d];if(e.classList.add("active"),setTimeout((()=>s(e)),0),!c){let t=e.parentNode;for(;!t.matches(".toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode}}})(d)}),100);btf.addEventListenerPjax("scroll",window,d,{passive:!0})},v=e=>{const t=document.getElementById("rightside-config-hide").classList;t.toggle("show"),e.classList.contains("show")&&(t.add("status"),setTimeout((()=>{t.remove("status")}),300)),e.classList.toggle("show")},I=()=>{const e=document.getElementById("rightside"),t=document.getElementById("fps");e&&!e.classList.contains("rightside-show")&&e.classList.add("rightside-show"),t&&!t.classList.contains("fps-show")&&t.classList.add("fps-show"),btf.scrollToDest(document.body.scrollHeight,500)},E=(e,t)=>{const n=document.getElementById("card-toc");n.style.transition="transform 0.3s ease-in-out";const o=n.clientHeight,i=t.getBoundingClientRect(),s=window.innerHeight-i.bottom-30;o>s&&(n.style.transformOrigin=`right ${o-s-i.height/2}px`),n.classList.toggle("open"),n.addEventListener("transitionend",(()=>{n.style.cssText=""}),{once:!0})};document.getElementById("rightside")?.addEventListener("click",(function(e){const t=e.target.id?e.target:e.target.parentNode;switch(t.id){case"go-up":btf.rmf.scrollToTop();break;case"rightside_config":v(t);break;case"mobile-toc-button":E(e.currentTarget,t);break;case"readmode":btf.rmf.switchReadMode();break;case"go-down":I()}}));const k=()=>{const e=document.querySelectorAll("#article-container .tabs");if(0===e.length)return;const t=(e,t)=>{e.forEach(((e,n)=>{e.classList.toggle("active",n===t)}))},n=e=>{const n=e.target.closest("button");if(!n||n.classList.contains("active"))return;const o=[...e.currentTarget.querySelectorAll("button")],i=[...e.currentTarget.closest(".tabs").querySelectorAll(".tab-contents > .tab-item-content")],s=o.indexOf(n);-1!==s&&(t(o.map((e=>e.parentElement)),s),t(i,s),e.currentTarget.classList.remove("no-default"),r(i[s].querySelectorAll(".gallery-container"),!0))};e.forEach((e=>{const t=e.querySelector(".nav-tabs"),o=e.querySelectorAll(".tab-to-top");t&&btf.addEventListenerPjax("click",t,n),o.length>0&&btf.addEventListenerPjax("click",o,(e=>t=>{t.target.closest("button")&&btf.scrollToDest(btf.getEleTop(e),300)})(e))}))},S=e=>{e.forEach((e=>{e.textContent=btf.diffDate(e.getAttribute("datetime"),!0),e.style.display="inline"}))},x=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent),B=()=>x||document.body.clientWidth<800,C=e=>{if("on"!==localStorage.getItem("mouse")||B())return!0;const t=document.querySelector("#rightMenu");document.querySelectorAll(".rightMenu-group.hide").forEach((e=>{e.style.display="none"}));const n=e.target;n instanceof HTMLElement&&n.focus?.();const o=window.getSelection();let i="";o&&(o.isCollapsed?o.removeAllRanges():i=o.toString().trim()),e.preventDefault(),i&&(document.getElementById("menu-text").style.display="block"),(document.getElementById("post")||document.getElementById("page"))&&(document.getElementById("menu-post").style.display="block");/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+/.test(i)&&"A"!==n.tagName&&(document.querySelector("#menu-too").style.display="block");const s=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)};"A"===n.tagName?(document.querySelector("#menu-to").style.display="block",btf.rmf.open=()=>{!n.href.startsWith("http")||n.href.includes("yisous.xyz")?pjax.loadUrl(n.href):location.href=n.href},btf.rmf.openWithNewTab=()=>window.open(n.href),btf.rmf.copyLink=()=>s(n.href)):"IMG"===n.tagName?(document.querySelector("#menu-img").style.display="block",btf.rmf.openWithNewTab=()=>window.open(n.src),btf.rmf.click=()=>n.click(),btf.rmf.copyLink=()=>s(n.src),btf.rmf.saveAs=()=>{fetch(n.src,{mode:"cors"}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n.src.split("/").pop(),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)})).catch((e=>{console.error("å›¾ç‰‡ä¸‹è½½å¤±è´¥ï¼š",e)}))}):["TEXTAREA","INPUT"].includes(n.tagName)&&(document.querySelector("#menu-paste").style.display="block",btf.rmf.paste=()=>{navigator.permissions.query({name:"clipboard-read"}).then((e=>{["granted","prompt"].includes(e.state)?navigator.clipboard.readText().then((e=>((e,t)=>{if(document.selection){e.focus();const n=document.selection.createRange();n.text=t,n.select()}else if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,o=e.selectionEnd,i=e.scrollTop;e.value=e.value.slice(0,n)+t+e.value.slice(o),i>0&&(e.scrollTop=i),e.focus(),e.selectionStart=e.selectionEnd=n+t.length}else e.value+=t,e.focus()})(n,e))):btf.$notify("ç²˜è´´å¤±è´¥","è¯·å…è®¸è¯»å–å‰ªè´´æ¿ï¼","error",3e3)}))}),t.style.visibility="hidden",t.style.display="block";const l=t.offsetWidth,c=t.offsetHeight;let a=e.clientX+10,r=e.clientY+10;a+l>window.innerWidth&&(a=e.clientX-l-10,a<0&&(a=0)),r+c>window.innerHeight&&(r=e.clientY-c-10,r<0&&(r=0));const d=(()=>{document.getElementById("rightMenu").style.zIndex="19198";const e=document.querySelector(".rmMask");if(e)return e;const t=document.createElement("div");return t.className="rmMask",Object.assign(t.style,{width:`${window.innerWidth}px`,height:`${window.innerHeight}px`,background:"#fff",opacity:"0",position:"fixed",top:"0",left:"0",zIndex:998}),document.body.appendChild(t),t})(),m=document.querySelector(".rmMask");return A(d),btf.rmf.showRightMenu(!0,r,a),m.style.display="flex",!1},A=e=>{const t=document.querySelectorAll(".rightMenu-item"),n=document.querySelector(".rmMask"),o=()=>{btf.rmf.showRightMenu(!1),n&&(n.style.display="none")};if(t.length>0&&btf.addGlobalListener("click",t,o,"click-right-menu-items"),btf.addGlobalListener("resize",window,o,"resize-hide-right-menu"),e){const t=()=>{e.style.display="none"};btf.addGlobalListener("click",e,t,"click-mask")}},G=()=>{B()||(btf.addEventListenerPjax("contextmenu",window,C),btf.addEventListenerPjax("click",window,(()=>{btf.rmf.showRightMenu(!1)})))},T=()=>[()=>l(),()=>{GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach((e=>{const t=e.title||e.alt;if(!t)return;const n=document.createElement("div");n.className="img-alt text-center",n.textContent=t,e.insertAdjacentElement("afterend",n)}))},()=>r(document.querySelectorAll("#article-container .gallery-container")),()=>{btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)"))},()=>w(),()=>(()=>{const e=document.querySelectorAll("#article-container table");e.length&&e.forEach((e=>{e.closest(".highlight")||btf.wrap(e,"div",{class:"table-wrap"})}))})(),()=>(()=>{const e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach((e=>e.addEventListener("click",(e=>{const t=e.currentTarget;t.classList.add("open"),r(t.nextElementSibling.querySelectorAll(".gallery-container"))}),{once:!0})))})(),()=>k()],O=()=>{N([()=>{const e=new btf.FpsMonitor;e.init(),window.addEventListener("beforeunload",(()=>e.destroy()))},()=>btf.checkWidth(),()=>{window.addEventListener("resize",(()=>{o(!1),n&&btf.isHidden(document.getElementById("toggle-menu"))&&s()}))},()=>{const e=document.getElementById("menu-mask");e&&e.addEventListener("click",(()=>{s()}))},()=>(()=>{const e=document.querySelector("#sidebar-menus .menus_items");e&&e.addEventListener("click",(e=>{const t=e.target.closest(".site-page.group");t&&t.classList.toggle("hide")}))})(),()=>GLOBAL_CONFIG?.copyright&&(()=>{const{limitCount:e,languages:t}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",(n=>{n.preventDefault();const o=window.getSelection(0).toString();let i=o;return o.length>e&&(i=`${o}\n\n\n${t.author}\n${t.link}${window.location.href}\n${t.source}\n${t.info}`),n.clipboardData?n.clipboardData.setData("text",i):window.clipboardData.setData("text",i)}))})(),()=>{setTimeout(console.log.bind(console,`\n %c MuXiaoChenðŸŠ %c ${btf.currentVersion} %c ${location.origin} \n`,"color: #ffffff; background: linear-gradient(90deg, #ff7e5f, #feb47b); padding:5px 0; border-radius: 5px;","color: #ffffff; background: linear-gradient(90deg, #6a11cb, #2575fc); padding:5px 0; border-radius: 5px;","color: #000000; background: #d4fc79; padding:5px 0; border-radius: 5px;"))}]).then((e=>{}))},N=async e=>{for(const t of e)await new Promise((e=>{btf.runIdle((()=>{try{t()}catch(e){console.error("task error",e)}e()}),200)}))},q=()=>{const e=[];GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&e.push((()=>(()=>{const e=document.getElementById("post-outdate-notice");if(!e)return;const{limitDay:t,messagePrev:n,messageNext:o,postUpdate:i}=JSON.parse(e.getAttribute("data")),s=btf.diffDate(i);s>=t&&(e.textContent=`${n} ${s} ${o}`,e.hidden=!1)})())),GLOBAL_CONFIG.relativeDate.post&&e.push((()=>S(document.querySelectorAll("#post-meta time"))))):(GLOBAL_CONFIG.relativeDate.homepage&&e.push((()=>S(document.querySelectorAll("#recent-posts time")))),GLOBAL_CONFIG.runtime&&e.push((()=>(()=>{const e=document.getElementById("runtimeshow");if(e){const t=e.getAttribute("data-publishDate");e.textContent=`${btf.diffDate(t)} ${GLOBAL_CONFIG.runtime}`}})())),e.push((()=>(()=>{const e=document.getElementById("last-push-date");if(e){const t=e.getAttribute("data-lastPushDate");e.textContent=btf.diffDate(t,!0)}})())),e.push((()=>(()=>{const e=document.querySelector("#aside-cat-list.expandBtn");if(!e)return;btf.addEventListenerPjax("click",e,(e=>{const t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))}),!0)})()))),GLOBAL_CONFIG_SITE.isHome&&e.push((()=>(()=>{const e=document.getElementById("scroll-down");e&&btf.addEventListenerPjax("click",e,(()=>{btf.scrollToDest(document.getElementById("home_top").offsetTop-60,300)}))})())),e.push(...T()),e.push((()=>(()=>{const e=document.getElementById("toggle-menu");e&&btf.addEventListenerPjax("click",e,(()=>{i()}))})())),e.push((()=>G())),e.push((()=>y())),L.forEach((t=>{e.push((()=>{btf.addEventListenerPjax(t.event,t.selector,t.callback)}))})),N(e).then((e=>{}))},$=()=>{o(!0),g().then((()=>{btf.checkShadowCache||(setTimeout(console.log.bind(console,"\n %c ðŸŒç³»ç»Ÿç¼“å­˜æ£€æŸ¥å®Œæ¯•ï¼\n","color: white; background: #4facfe; padding:5px 0; border-radius: 5px;")),btf.checkShadowCache=!0)})),u(),(()=>{const e=document.getElementById("recent-posts");if(!e||!e.classList.contains("masonry"))return;const t=()=>{const e=new InfiniteGrid.MasonryInfiniteGrid(".recent-post-items",{gap:{horizontal:10,vertical:20},useTransform:!0,useResizeObserver:!0});e.renderItems(),btf.addGlobalFn("pjaxCompleteOnce",(()=>{e.destroy()}),"removeJustifiedIndexPostUI")};"function"==typeof InfiniteGrid?t():getScript(`${GLOBAL_CONFIG.infinitegrid.js}`).then(t)})(),d(),btf.switchComments(document),q()};btf.addGlobalFn("pjaxComplete",$,"refreshFn"),$(),GLOBAL_CONFIG.islazyloadPlugin&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),btf.addGlobalFn("pjaxComplete",(()=>{window.lazyLoadInstance.update()}),"lazyload")),O()}));