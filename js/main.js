document.addEventListener("DOMContentLoaded",(function(){let e,t,n=!1;const o=n=>{const o=e=>Array.from(e).reduce(((e,t)=>e+t.offsetWidth),0);if(n){const n=o(document.querySelector("#nav > #blog_name").children),s=o(document.querySelector("#nav > .menus_items").children),l=o(document.querySelector("#nav > #nav-right").children);e=n+s+l,t=document.getElementById("nav")}const s=window.innerWidth<=800||e>t.offsetWidth-120;t.classList.toggle("hide-menu",s)},s=()=>{btf.overflowPaddingR.add(),btf.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),n=!0},l=()=>{btf.overflowPaddingR.remove(),btf.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),n=!1},i=function(){const e=GLOBAL_CONFIG.highlight;if(!e)return;const t=e.highlightCopy,n=e.highlightLang,o=GLOBAL_CONFIG_SITE.isHighlightShrink,s=e.highlightHeightLimit,l=t||n||void 0!==o,i="highlighjs"===e.plugin?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!l&&!s||!i.length)return;const a="prismjs"===e.plugin;let c="",r="";const d=!0===o?"closed":"";void 0!==o&&(c=`<i class="fas fa-angle-down expand ${d}"></i>`),t&&(r='<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>');const m=e=>{const t=e.parentNode;t.classList.add("copy-true");const n=window.getSelection(),o=document.createRange();a?o.selectNodeContents(t.querySelectorAll("pre code")[0]):o.selectNodeContents(t.querySelectorAll("table .code pre")[0]),n.removeAllRanges(),n.addRange(o);n.toString();((e,t)=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy"))if(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar);else{const e=t.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}else void 0!==GLOBAL_CONFIG.Snackbar||(t.previousElementSibling.innerText=GLOBAL_CONFIG.copy.noSupport)})(0,e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},u=function(e){const t=e.target.classList;t.contains("expand")?(e=>{const t=[...e.parentNode.children].slice(1);e.firstChild.classList.toggle("closed"),btf.isHidden(t[t.length-1])?t.forEach((e=>{e.style.display="block"})):t.forEach((e=>{e.style.display="none"}))})(this):t.contains("copy-button")&&m(this)},g=function(){this.classList.toggle("expand-done")},f=(e,t,n)=>{const o=document.createDocumentFragment();if(l){const t=document.createElement("div");t.className=`highlight-tools ${d}`,t.innerHTML=c+e+r,t.addEventListener("click",u),o.appendChild(t)}if(s&&t.offsetHeight>s+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',e.addEventListener("click",g),o.appendChild(e)}"hl"===n?t.insertBefore(o,t.firstChild):t.parentNode.insertBefore(o,t)};n?a?i.forEach((function(e){const t=`<div class="code-lang">${e.getAttribute("data-language")?e.getAttribute("data-language"):"Code"}</div>`;btf.wrap(e,"figure",{class:"highlight"}),f(t,e)})):i.forEach((function(e){let t=e.getAttribute("class").split(" ")[1];"plain"!==t&&void 0!==t||(t="Code");f(`<div class="code-lang">${t}</div>`,e,"hl")})):a?i.forEach((function(e){btf.wrap(e,"figure",{class:"highlight"}),f("",e)})):i.forEach((function(e){f("",e,"hl")}))};const a=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){return console.error("Failed to fetch URL:",e),[]}},c=(e,t,n)=>{const{isButton:o,limit:s,firstLimit:l,tabs:i}=n,a=t.length,c=Math.ceil((a-l)/s+1),r=new InfiniteGrid.JustifiedInfiniteGrid(e,{gap:5,isConstantSize:!0,sizeRange:[150,700],useResizeObserver:!0,observeChildren:!0,useTransform:!0});let d=!1;const m=e=>e&&e.replace(/"/g,"&quot;")||"",u=e=>{const t=e.alt?`alt="${m(e.alt)}"`:"",n=e.title?`title="${m(e.title)}"`:"";return`<div class="item">\n        <img src="${e.url}" data-grid-maintained-target="true" ${t} ${n} />\n      </div>`},g=(e,n,o)=>{r.append(((e,n,o=!1)=>{const s=o?(e-1)*n:(e-2)*n+l;return t.slice(s,s+n).map(u)})(e,n,o),e)},f=t=>{if(i){const t=e.parentNode;d&&(t.style.visibility="visible"),0===e.offsetHeight&&(t.style.visibility="hidden",d=!0)}const{updated:n,isResize:l,mounted:a}=t;if(n.length&&a.length&&!l){if(btf.loadLightbox(e.querySelectorAll("img:not(.medium-zoom-image)")),r.getGroups().length===c)return btf.setLoading.remove(e),void(!i&&r.off("renderComplete",f));o&&(btf.setLoading.remove(e),(e=>{const t=document.createElement("button");t.innerHTML=`${GLOBAL_CONFIG.infinitegrid.buttonText}<i class="fa-solid fa-arrow-down"></i>`,t.addEventListener("click",(()=>{t.remove(),btf.setLoading.add(e),g(r.getGroups().length+1,s)}),{once:!0}),e.insertAdjacentElement("afterend",t)})(e))}},h=btf.debounce((e=>{const t=(+e.groupKey||0)+1;1===t?g(t,l,!0):g(t,s),t===c&&r.off("requestAppend",h)}),300);btf.setLoading.add(e),r.on("renderComplete",f),o?g(1,l,!0):(r.on("requestAppend",h),r.renderItems()),btf.addGlobalFn("pjaxSendOnce",(()=>r.destroy()))},r=async(e,t=!1)=>{if(!e.length)return;const n=async()=>{for(const n of e){if(btf.isHidden(n)||n.classList.contains("loaded"))continue;const e={isButton:"true"===n.getAttribute("data-button"),limit:parseInt(n.getAttribute("data-limit"),10),firstLimit:parseInt(n.getAttribute("data-first"),10),tabs:t},o=n.firstElementChild,s=o.textContent;o.textContent="",n.classList.add("loaded");try{const t="url"===n.getAttribute("data-type")?await a(s):JSON.parse(s);c(o,t,e)}catch(e){console.error("Gallery data parsing failed:",e)}}};"function"==typeof InfiniteGrid||await getScript(GLOBAL_CONFIG.infinitegrid.js),await n()},d=()=>{const e=document.getElementById("settingStyle"),t=document.getElementById("global-font"),n=document.getElementById("defineBg"),o=document.getElementById("universe"),s=document.getElementById("snow");o.style.display=localStorage.getItem("universe"),s.style.display=localStorage.getItem("snow");try{const e=localStorage.getItem("font")||"LXGW";localStorage.setItem("font",e);const n="-apple-system, Consolas_1, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Lato, Roboto, 'PingFang SC', 'Microsoft JhengHei', 'Microsoft YaHei', sans-serif",o="var(--global-font), -apple-system, IBM Plex Mono, monospace, 'å¾®è½¯é›…é»‘', sans-serif";"default"===e?(t.textContent=":root{--global-font: -apple-system; }",document.body.style.fontFamily=n):(t.textContent=`:root{--global-font: ${e}; }`,document.body.style.fontFamily=o)}catch(e){console.error("Error accessing localStorage:",e),t.textContent=":root{--global-font: -apple-system; }",document.body.style.fontFamily="-apple-system, Consolas_1, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Lato, Roboto, 'PingFang SC', 'Microsoft JhengHei', 'Microsoft YaHei', sans-serif"}try{const e=localStorage.getItem("themeColor")||"green";localStorage.setItem("themeColor",e),document.getElementById("themeColor").textContent=":root{--theme-color:"+btf.map.get(e)+" !important}";const t=btf.map.get(e),n="rgba"+t.substring(3,t.length-1)+", 0.7)",o="rgba"+t.substring(3,t.length-1)+", 0.5)",s="rgba"+t.substring(3,t.length-1)+", 0.1)";document.getElementById("global-color").textContent=`:root{--text-bg-hover: ${n}; --high-trans-color: ${o}; --hh-trans-color: ${s}; }`}catch(e){console.log("Setting color exceptionï¼š",e)}const l=document.documentElement.classList;"1"===localStorage.getItem("aside")?l.remove("hide-aside"):l.add("hide-aside"),document.getElementById("aside-pos").textContent="1"==localStorage.getItem("asidePos")?":root{--first-child-order: 0; --recent-post-item-margin: 0 0 0 15px; --recent-post-item-margin-other: 0 0 0 15px; }":":root{--first-child-order: 2; --recent-post-item-margin: 0 15px 0 0; --recent-post-item-margin-other: 0 15px 0 0; }";const i=localStorage.getItem("transNum")||85;document.getElementById("transPercent").textContent=`:root{--trans-light: rgba(253, 253, 253, ${i}%) !important; --trans-dark: rgba(20, 24, 30, ${i}%) !important; --trans-comment-dark: rgba(28, 32, 40, ${i}%) !important} `;const a=localStorage.getItem("blurRad")||20;document.getElementById("bgFilterParam").textContent=`:root{--blur-num: blur(${a}px) saturate(120%) contrast(105%) !important; `,e.textContent="0"==localStorage.getItem("blur")?":root{--bg-filter: none; }":":root{--bg-filter: var(--blur-num); }";const c=localStorage.getItem("blogbg")||"default";var r;"default"===c?(n.textContent=":root{\n                --default-bg: url(https://img.miraii.cn/wallpaper?type=pc);\n                --darkmode-bg:url(https://img.miraii.cn/wallpaper?type=pc);\n                --mobileday-bg: url(https://cdn.aimiliy.top/backImg/418aa5a692048078aec56e073ed15e8849ff99a012daa8-4Bc9wf.webp);\n                --mobilenight-bg: url(https://cdn.aimiliy.top/backImg/20191012131221_mTGle.webp);\n              }",localStorage.setItem("blogbg","default")):(r=c,n.textContent=`:root{\n                --default-bg: ${r};\n                --darkmode-bg: ${r};\n                --mobileday-bg: ${r};\n                --mobilenight-bg: ${r};\n              }`);const d=document.getElementById("site-name"),m=document.getElementById("site-title"),u=document.getElementById("site-subtitle"),g=document.getElementById("post-info"),f=document.getElementById("menu_shadow"),h="true"===localStorage.getItem("light");d&&(d.style.animation=h?"light_15px 10s linear infinite":"none"),m&&(m.style.animation=h?"light_15px 10s linear infinite":"none"),u&&(u.style.animation=h?"light_10px 10s linear infinite":"none"),g&&(g.style.animation=h?"light_5px 10s linear infinite":"none"),f.innerText=h?":root{--menu-shadow: 0 0 1px var(--theme-color);}":":root{--menu-shadow: none;}"},m=async()=>{const e=localStorage.getItem("MuXiaoChenVersion");((e,t)=>null===t||t!==e)(btf.currentVersion,e)&&(localStorage.setItem("MuXiaoChenVersion",btf.currentVersion),btf.initItem({id:"7397995017",type:"playlist",server:"tencent"}),await new Promise((e=>{setTimeout((()=>{btf.$notify("æç¤ºğŸ’","(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾ç”±äºç½‘ç«™éƒ¨åˆ†è®¾ç½®åŠŸèƒ½æ›´æ–°ï¼Œå½“å‰å·²ä¸ºæ‚¨é‡ç½®æ‰€æœ‰è®¾ç½®ï¼Œç¥æ‚¨æ„‰å¿«ï¼","warning",5e3),e()}),500)})))},u=async()=>{let e=null;if(!/^\/(?:page\/\d+\/|)$/.test(window.location.pathname))return;let t=localStorage.getItem("ipLocation"),n=localStorage.getItem("locationTime"),o=(new Date).getTime();if(t&&n&&o-n<18e5)g(JSON.parse(t));else{g(e,!0);try{const t=await new Promise(((e,t)=>{const n="jsonp_callback_"+Math.random().toString(36).substr(2,10);window[n]=function(t){e(t),document.body.removeChild(o),delete window[n]};const o=document.createElement("script");o.src=`https://apis.map.qq.com/ws/location/v1/ip?key=UEVBZ-KBWCW-L67R2-YZ7NC-CYZY3-LKFR5&output=jsonp&callback=${n}`,o.onerror=function(e){t(e),delete window[n]},document.body.appendChild(o)}));localStorage.setItem("ipLocation",JSON.stringify(t)),localStorage.setItem("locationTime",o),e=t}catch(t){console.error("Location fetch failed:",t),e={result:{ad_info:{nation:"æœªçŸ¥",province:"æœªçŸ¥",city:"æœªçŸ¥"},location:{lat:0,lng:0}}}}finally{g(e)}}},g=(e,t)=>{const n=document.getElementById("welcome-info");if(t)return void(n.innerHTML='<div style="text-align: center;"><b>ğŸ‰ æ¬¢è¿ä¿¡æ¯ ğŸ‰</b></div><b><span style="padding:10px;display: flex;justify-content: center;align-items: center;">&emsp;&emsp;æ‚¨å½“å‰çš„ç½‘ç»œè¾ƒæ…¢ï¼Œæ­£åœ¨åŠ é€Ÿè·å–æ‚¨çš„ä½ç½®ä¿¡æ¯ï¼</span></b>');let o=((e,t,n,o)=>{const s=e=>e*Math.PI/180,l=s(o-t),i=s(n-e),a=Math.sin(l/2)**2+Math.cos(s(t))*Math.cos(s(o))*Math.sin(i/2)**2,c=2*Math.asin(Math.sqrt(a));return Math.round(6371*c)})(114.34253,30.49984,e.result.location.lng,e.result.location.lat),s=e.result.ad_info.nation;e.result.ad_info.province&&(s=e.result.ad_info.province+" "+e.result.ad_info.city+" "+e.result.ad_info.district);let l=e.result.ip,i=((e,t,n)=>{const o={"æ—¥æœ¬":"ã‚ˆã‚ã—ãï¼Œä¸€èµ·å»çœ‹æ¨±èŠ±å—","ç¾å›½":"Let us live in peace!","è‹±å›½":"æƒ³åŒä½ ä¸€èµ·å¤œä¹˜ä¼¦æ•¦çœ¼","ä¿„ç½—æ–¯":"å¹²äº†è¿™ç“¶ä¼ç‰¹åŠ ï¼","æ³•å›½":"C'est La Vie","å¾·å›½":"Die Zeit verging im Fluge.","æ¾³å¤§åˆ©äºš":"ä¸€èµ·å»å¤§å ¡ç¤å§ï¼","åŠ æ‹¿å¤§":"æ‹¾èµ·ä¸€ç‰‡æ«å¶èµ äºˆä½ ","ä¸­å›½":{"åŒ—äº¬å¸‚":"åŒ—â€”â€”äº¬â€”â€”æ¬¢è¿ä½ ~~~","å¤©æ´¥å¸‚":"è®²æ®µç›¸å£°å§ã€‚","æ²³åŒ—çœ":"å±±åŠ¿å·å·æˆå£å’ï¼Œå¤©ä¸‹é›„å…³...","å±±è¥¿çœ":"å±•å¼€åå…·é•¿ä¸‰å°ºï¼Œå·²å å±±æ²³äº”ç™¾ä½™ã€‚","å†…è’™å¤è‡ªæ²»åŒº":"å¤©è‹è‹ï¼Œé‡èŒ«èŒ«ï¼Œé£å¹è‰ä½è§ç‰›ç¾Šã€‚","è¾½å®çœ":"æˆ‘æƒ³åƒçƒ¤é¸¡æ¶ï¼","å‰æ—çœ":"çŠ¶å…ƒé˜å°±æ˜¯ä¸œåŒ—çƒ§çƒ¤ä¹‹ç‹ã€‚","é»‘é¾™æ±Ÿçœ":"å¾ˆå–œæ¬¢å“ˆå°”æ»¨å¤§å‰§é™¢ã€‚","ä¸Šæµ·å¸‚":"ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸­å›½åªæœ‰ä¸¤ä¸ªåŸå¸‚ã€‚","æ±Ÿè‹çœ":{"å—äº¬å¸‚":"è¿™æ˜¯æˆ‘æŒºæƒ³å»çš„åŸå¸‚å•¦ã€‚","è‹å·å¸‚":"ä¸Šæœ‰å¤©å ‚ï¼Œä¸‹æœ‰è‹æ­ã€‚",default:"æ•£è£…æ˜¯å¿…é¡»è¦æ•£è£…çš„ã€‚"},"æµ™æ±Ÿçœ":"ä¸œé£æ¸ç»¿è¥¿æ¹–æŸ³ï¼Œé›å·²è¿˜äººæœªå—å½’ã€‚","æ²³å—çœ":{"éƒ‘å·å¸‚":"è±«å·ä¹‹åŸŸï¼Œå¤©åœ°ä¹‹ä¸­ã€‚","å—é˜³å¸‚":"è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ã€‚æ­¤å—é˜³éå½¼å—é˜³ï¼","é©»é©¬åº—å¸‚":"å³°å³°æœ‰å¥‡çŸ³ï¼ŒçŸ³çŸ³æŒŸä»™æ°”ã€‚åµ–å²ˆå±±çš„èŠ±å¾ˆç¾å“¦ï¼",default:"å¯å¦å¸¦æˆ‘å“å°æ²³å—çƒ©é¢å•¦ï¼Ÿ"},"å®‰å¾½çœ":"èšŒåŸ ä½äº†ï¼ŒèŠœæ¹–èµ·é£ã€‚","ç¦å»ºçœ":"äº•é‚‘ç™½äº‘é—´ï¼Œå²©åŸè¿œå¸¦å±±ã€‚","æ±Ÿè¥¿çœ":"è½éœä¸å­¤é¹œé½é£ï¼Œç§‹æ°´å…±é•¿å¤©ä¸€è‰²ã€‚","å±±ä¸œçœ":"é¥æœ›é½å·ä¹ç‚¹çƒŸï¼Œä¸€æ³“æµ·æ°´æ¯ä¸­æ³»ã€‚","æ¹–åŒ—çœ":"æ¥ç¢—çƒ­å¹²é¢ï¼","æ¹–å—çœ":"74751ï¼Œé•¿æ²™æ–¯å¡”å…‹ã€‚","å¹¿ä¸œçœ":"è€æ¿æ¥ä¸¤æ–¤ç¦å»ºäººã€‚","å¹¿è¥¿å£®æ—è‡ªæ²»åŒº":"æ¡‚æ—å±±æ°´ç”²å¤©ä¸‹ã€‚","æµ·å—çœ":"æœè§‚æ—¥å‡ºé€ç™½æµªï¼Œå¤•çœ‹äº‘èµ·æ”¶éœå…‰ã€‚","å››å·çœ":"åº·åº·å·å¦¹å­ã€‚","è´µå·çœ":"èŒ…å°ï¼Œå­¦ç”Ÿï¼Œå†å¡200ã€‚","äº‘å—çœ":"ç‰é¾™é£èˆäº‘ç¼ ç»•ï¼Œä¸‡ä»å†°å·ç›´è€¸å¤©ã€‚","è¥¿è—è‡ªæ²»åŒº":"èººåœ¨èŒ«èŒ«è‰åŸä¸Šï¼Œä»°æœ›è“å¤©ã€‚","é™•è¥¿çœ":"æ¥ä»½è‡Šå­é¢åŠ é¦ã€‚","ç”˜è‚ƒçœ":"ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³ã€‚","é’æµ·çœ":"ç‰›è‚‰å¹²å’Œè€é…¸å¥¶éƒ½å¥½å¥½åƒã€‚","å®å¤å›æ—è‡ªæ²»åŒº":"å¤§æ¼ å­¤çƒŸç›´ï¼Œé•¿æ²³è½æ—¥åœ†ã€‚","æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº":"é©¼é“ƒå¤é“ä¸ç»¸è·¯ï¼Œèƒ¡é©¬çŠ¹é—»å”æ±‰é£ã€‚","å°æ¹¾çœ":"æˆ‘åœ¨è¿™å¤´ï¼Œå¤§é™†åœ¨é‚£å¤´ã€‚","é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº":"æ°¸å®šè´¼æœ‰æ®‹ç•™åœ°é¬¼åšï¼Œè¿å‡»å…‰éå²ç‰ã€‚","æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº":"æ€§æ„Ÿè·å®˜ï¼Œåœ¨çº¿å‘ç‰Œã€‚",default:"å¸¦æˆ‘å»ä½ çš„åŸå¸‚é€›é€›å§ï¼"},default:"å¸¦æˆ‘å»ä½ çš„å›½å®¶é€›é€›å§ã€‚"};return"ä¸­å›½"===e&&o[e]&&o[e][t]?"object"==typeof o[e][t]?o[e][t][n]?o[e][t][n]:o[e][t].default||"å’¦ï¼Œè¿™é‡Œå¥½åƒè¿˜æ²¡è¢«å°ç²¾çµæ ‡æ³¨å“ï¼":o[e][t]:o[e]?o[e]:o.default})(e.result.ad_info.nation,e.result.ad_info.province,e.result.ad_info.city),a=(()=>{const e=(new Date).getHours();return e>=5&&e<11?"<span>æ—©ä¸Šå¥½</span>ï¼Œä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å‘€ï¼":e>=11&&e<13?"<span>ä¸­åˆå¥½</span>ï¼Œå…ˆæ”¾ä¸‹å·¥ä½œåƒé¡¿å¥½çš„å§ï½":e>=13&&e<15?"<span>ä¸‹åˆå¥½</span>ï¼Œå°æ†©ä¸€ä¼šå„¿ï¼Œåˆ«å¤ªç´¯äº†å“¦ã€‚":e>=15&&e<16?"<span>èŒ¶ç‚¹æ—¶é—´</span>åˆ°å•¦ï¼æ¥æ¯å¥¶èŒ¶ææç¥ï½":e>=16&&e<19?"<span>å‚æ™šå¥½</span>ï¼Œå¤•é˜³æ­£ç¾ï¼Œè®°å¾—ä¼‘æ¯çœ¼ç›ã€‚":e>=19&&e<24?"<span>æ™šä¸Šå¥½</span>ï¼Œä»Šå¤©ä¹Ÿè¾›è‹¦å•¦ï¼Œæ”¾æ¾ä¸€ä¸‹å§ï½":"<span>å¤œæ·±äº†</span>ï¼Œæ—©ç‚¹ä¼‘æ¯ï¼Œåˆ«å†åˆ·æ‰‹æœºå•¦ï½"})();try{n.innerHTML=`<div style="text-align: center;"><b>ğŸ‰ æ¬¢è¿ä¿¡æ¯ ğŸ‰</b></div><b>&emsp;&emsp;æ¬¢è¿æ¥è‡ª <span style="color:var(--theme-color)">${s}</span> çš„å°ä¼™ä¼´ï¼Œ${a}æ‚¨ç°åœ¨è·ç¦»ç«™é•¿çº¦ <span style="color:var(--theme-color)">${o}</span> å…¬é‡Œï¼Œå½“å‰çš„IPåœ°å€ä¸ºï¼š <span style="color:var(--theme-color)">${l}</span>ï¼Œ ${i}</b>`}catch(e){console.error("åŠ è½½é¦–é¡µæ¬¢è¿è¯­å¼‚å¸¸ï¼š",e)}},f=btf.debounce((()=>{btf.$notify("å“å˜¿ï¼å¤åˆ¶æˆåŠŸğŸ¬","è‹¥è¦è½¬è½½æœ€å¥½ä¿ç•™åŸæ–‡é“¾æ¥å“¦ï¼Œç»™ä½ ä¸€ä¸ªå¤§å¤§çš„èµï¼","success",3e3)}),500,!0),h=btf.debounce((e=>{(e=>{const t=["F12","I","J","C","U"];return t.includes(e.key)&&("F12"===e.key||e.ctrlKey&&e.shiftKey&&t.slice(1,4).includes(e.key)||e.ctrlKey&&"U"===e.key)})(e)&&btf.$notify("ä½ å·²è¢«å‘ç°ğŸ˜œ","å°ä¼™å­ï¼Œæ‰’æºè®°ä½è¦éµå¾ªGPLåè®®ï¼","warning",3e3)}),500,!0),p=btf.throttle((()=>{btf.checkWidth()}),200,{leading:!0,trailing:!1}),b=document.querySelectorAll('a[href="#post-comment"]'),y=()=>{let e=window.location.hash;if(!e)return;e=e.slice(1);const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},v=[{event:"copy",selector:document,callback:f,eventName:"onCopy"},{event:"keydown",selector:document,callback:h,eventName:"onKeydownGPL"},{event:"visibilitychange",selector:document,callback:()=>{let e;document.hidden?(document.title="ğŸ‘€è·‘å“ªé‡Œå»äº†~",clearTimeout(e)):(document.title="ğŸ–æŠ“åˆ°ä½ å•¦ï½",e=setTimeout((()=>{document.title="MuXiaoChenğŸŠ"}),2e3))},eventName:"onVisibilityChangeTitle"},{event:"resize",selector:window,callback:p,eventName:"onResizeCheckWidth"},{event:"click",selector:b,callback:e=>{e.preventDefault();const t=document.querySelector("#post-comment");t&&t.scrollIntoView({behavior:"smooth"})},eventName:"onClickPostComment"},{event:"hashchange",selector:window,callback:y,eventName:"onHashChange"}],L=function(){const e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor,n=document.getElementById("article-container");if(!n||!e&&!t)return;let o,s,l,i,a;if(e){const e=document.getElementById("card-toc");s=e.querySelector(".toc-content"),o=s.querySelectorAll(".toc-link"),i=e.querySelector(".toc-percentage"),a=s.classList.contains("is-expand");const t=t=>{const n=t.target.closest(".toc-link");n&&(t.preventDefault(),btf.scrollToDest(btf.getEleTop(document.getElementById(decodeURI(n.getAttribute("href")).replace("#",""))),300),window.innerWidth<900&&e.classList.remove("open"))};btf.addEventListenerPjax("click",s,t,"$cardToc"),l=e=>{const t=s.clientHeight,n=e.offsetTop,o=e.clientHeight,l=s.scrollTop,i=n-l,a=(t-o)/2;i!==a&&(s.scrollTop=l+(i-a))},s.style.display="block"}const c=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let r="";const d=btf.throttle((function(){const d=window.scrollY||document.documentElement.scrollTop;e&&GLOBAL_CONFIG.percent.toc&&(i.textContent=btf.getScrollPercent(d,n)),(n=>{if(0===n)return!1;let i="",d="";for(let e=0;e<c.length;e++){const t=c[e];if(!(n>btf.getEleTop(t)-80))break;{const n=t.id;i=n?"#"+encodeURI(n):"",d=e}}if(r!==d&&(t&&btf.updateAnchor(i),r=d,e&&(s.querySelectorAll(".active").forEach((e=>e.classList.remove("active"))),i))){const e=o[d];if(e.classList.add("active"),setTimeout((()=>l(e)),0),!a){let t=e.parentNode;for(;!t.matches(".toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode}}})(d)}),100);btf.addEventListenerPjax("scroll",window,d,"tocScrollFn",{passive:!0})},I=()=>{const e=document.body,t=document.createElement("button"),n=()=>{e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n,!1)};e.classList.add("read-mode"),t.type="button",t.className="fas fa-sign-out-alt exit-readmode",btf.addGlobalListener("click",t,n,"exitReadMode"),e.appendChild(t)},w=()=>{"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2)):(activateLightMode(),saveToLocal.set("theme","light",2)),"function"==typeof utterancesTheme&&utterancesTheme(),"function"==typeof changeGiscusTheme&&changeGiscusTheme(),"object"==typeof FB&&window.loadFBComment(),"function"==typeof runMermaid&&window.runMermaid()},S=e=>{const t=document.getElementById("rightside-config-hide").classList;t.toggle("show"),e.classList.contains("show")&&(t.add("status"),setTimeout((()=>{t.remove("status")}),300)),e.classList.toggle("show")},E=()=>{const e=document.getElementById("rightside"),t=document.getElementById("fps");e.classList.contains("rightside-show")||e.classList.add("rightside-show"),t.classList.contains("fps-show")||t.classList.add("fps-show"),btf.scrollToDest(document.body.scrollHeight,500)},k=()=>{btf.scrollToDest(0,500)},C=()=>{document.documentElement.classList.toggle("hide-aside")},x=(e,t)=>{const n=document.getElementById("card-toc");n.style.transition="transform 0.3s ease-in-out";const o=n.clientHeight,s=t.getBoundingClientRect(),l=window.innerHeight-s.bottom-30;o>l&&(n.style.transformOrigin=`right ${o-l-s.height/2}px`),n.classList.toggle("open"),n.addEventListener("transitionend",(()=>{n.style.cssText=""}),{once:!0})};document.getElementById("rightside").addEventListener("click",(function(e){const t=e.target.id?e.target:e.target.parentNode;switch(t.id){case"go-up":k();break;case"rightside_config":S(t);break;case"mobile-toc-button":x(e.currentTarget,t);break;case"readmode":I();break;case"darkmode":w();break;case"hide-aside-btn":C();break;case"go-down":E()}}));const B=()=>{const e=document.querySelectorAll("#article-container .tabs");if(0===e.length)return;const t=(e,t)=>{e.forEach(((e,n)=>{e.classList.toggle("active",n===t)}))},n=e=>{const n=e.target.closest("button");if(!n||n.classList.contains("active"))return;const o=[...e.currentTarget.querySelectorAll("button")],s=[...e.currentTarget.closest(".tabs").querySelectorAll(".tab-contents > .tab-item-content")],l=o.indexOf(n);-1!==l&&(t(o.map((e=>e.parentElement)),l),t(s,l),e.currentTarget.classList.remove("no-default"),r(s[l].querySelectorAll(".gallery-container"),!0))};let o=0;e.forEach((e=>{const t=e.querySelector(".nav-tabs"),s=e.querySelectorAll(".tab-to-top");t&&btf.addEventListenerPjax("click",t,n,`handleNavClick_${o}`),s.length>0&&btf.addEventListenerPjax("click",s,(e=>t=>{t.target.closest("button")&&btf.scrollToDest(btf.getEleTop(e),300)})(e),`handleToTopClick_${o}`),o++}))},A=e=>{e.forEach((e=>{e.textContent=btf.diffDate(e.getAttribute("datetime"),!0),e.style.display="inline"}))},N=e=>{if("on"!==localStorage.getItem("mouse")||btf.hasMobile())return!0;e.preventDefault();const t=document.querySelector("#rightMenu");document.querySelector(".rightMenu-group.hide").style.display="none";const n=e.target,o=document.getSelection().toString();o&&(document.getElementById("menu-text").style.display="block"),(document.getElementById("post")||document.getElementById("page"))&&(document.getElementById("menu-post").style.display="block");/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+/.test(o)&&"A"!==n.tagName&&(document.querySelector("#menu-too").style.display="block");const s=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)};"A"===n.tagName?(document.querySelector("#menu-to").style.display="block",btf.rmf.open=()=>{!n.href.startsWith("http")||n.href.includes("yisous.xyz")?pjax.loadUrl(n.href):location.href=n.href},btf.rmf.openWithNewTab=()=>window.open(n.href),btf.rmf.copyLink=()=>s(n.href)):"IMG"===n.tagName?(document.querySelector("#menu-img").style.display="block",btf.rmf.openWithNewTab=()=>window.open(n.src),btf.rmf.click=()=>n.click(),btf.rmf.copyLink=()=>s(n.src),btf.rmf.saveAs=()=>{fetch(n.src,{mode:"cors"}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n.src.split("/").pop(),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)})).catch((e=>{console.error("å›¾ç‰‡ä¸‹è½½å¤±è´¥ï¼š",e)}))}):["TEXTAREA","INPUT"].includes(n.tagName)&&(document.querySelector("#menu-paste").style.display="block",btf.rmf.paste=()=>{navigator.permissions.query({name:"clipboard-read"}).then((e=>{["granted","prompt"].includes(e.state)?navigator.clipboard.readText().then((e=>((e,t)=>{if(document.selection){e.focus();const n=document.selection.createRange();n.text=t,n.select()}else if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,o=e.selectionEnd,s=e.scrollTop;e.value=e.value.slice(0,n)+t+e.value.slice(o),s>0&&(e.scrollTop=s),e.focus(),e.selectionStart=e.selectionEnd=n+t.length}else e.value+=t,e.focus()})(n,e))):Snackbar.show({text:"è¯·å…è®¸è¯»å–å‰ªè´´æ¿ï¼",pos:"top-center",showAction:!1})}))});let l=e.clientX+10,i=e.clientY;const a=t.offsetWidth,c=t.offsetHeight;l+a>window.innerWidth&&(l-=a+10),i+c>window.innerHeight&&(i-=i+c-window.innerHeight);const r=(()=>{document.getElementById("rightMenu").style.zIndex="19198";const e=document.querySelector(".rmMask");if(e)return e;const t=document.createElement("div");return t.className="rmMask",Object.assign(t.style,{width:`${window.innerWidth}px`,height:`${window.innerHeight}px`,background:"#fff",opacity:"0",position:"fixed",top:"0",left:"0",zIndex:998}),document.body.appendChild(t),t})(),d=document.querySelector(".rmMask");return T(r),btf.rmf.showRightMenu(!0,i,l),d.style.display="flex",!1},T=e=>{const t=document.querySelectorAll(".rightMenu-item"),n=document.querySelector(".rmMask"),o=()=>{btf.rmf.showRightMenu(!1),n&&(n.style.display="none")};if(t.length>0&&btf.addGlobalListener("click",t,o,"click-right-menu-items"),btf.addGlobalListener("resize",window,o,"resize-hide-right-menu"),e){const t=()=>{e.style.display="none"};btf.addGlobalListener("click",e,t,"click-mask")}},G=()=>{btf.hasMobile()||(btf.addEventListenerPjax("contextmenu",window,N,"right-click-contextmenu"),btf.addEventListenerPjax("click",window,(()=>{btf.rmf.showRightMenu(!1)}),"click-outside-hide-right-menu"))},O=()=>{i(),GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach((e=>{const t=e.title||e.alt;if(!t)return;const n=document.createElement("div");n.className="img-alt text-center",n.textContent=t,e.insertAdjacentElement("afterend",n)})),r(document.querySelectorAll("#article-container .gallery-container")),btf.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),L(),(()=>{const e=document.querySelectorAll("#article-container table");e.length&&e.forEach((e=>{e.closest(".highlight")||btf.wrap(e,"div",{class:"table-wrap"})}))})(),(()=>{const e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach((e=>e.addEventListener("click",(e=>{const t=e.currentTarget;t.classList.add("open"),r(t.nextElementSibling.querySelectorAll(".gallery-container"))}),{once:!0})))})(),B()},_=()=>{o(!0),t.classList.add("show"),m(),(()=>{const e=document.getElementById("modeicon"),t=document.getElementById("modeiconT"),n=document.documentElement.getAttribute("data-theme"),o=localStorage.getItem("universe");(null==o||"block"!==o&&"none"!==o)&&localStorage.setItem("universe","block");const s=localStorage.getItem("snow");(null==s||"block"!==s&&"none"!==s)&&localStorage.setItem("snow","none");const l=localStorage.getItem("fpson");(null==l||"1"!==l&&"0"!==l)&&localStorage.setItem("fpson","1");const i=localStorage.getItem("aside");(null==i||"1"!==i&&"0"!==i)&&localStorage.setItem("aside","1");const a=localStorage.getItem("asidePos");(null==a||"0"!==a&&"1"!==a)&&localStorage.setItem("asidePos","1");const c=localStorage.getItem("nav");(null==c||"1"!==c&&"0"!==c)&&localStorage.setItem("nav","1");const r=localStorage.getItem("rs");(null==r||"block"!==r&&"none"!==r)&&localStorage.setItem("rs","block");const d=localStorage.getItem("transNum");(null==d||isNaN(d)||d<0||d>100)&&localStorage.setItem("transNum","85");const m=localStorage.getItem("blurRad");(null==m||isNaN(m)||m<0||m>100)&&localStorage.setItem("blurRad","20");const u=localStorage.getItem("blur");(null==u||"1"!==u&&"0"!==u)&&localStorage.setItem("blur","0");const g=localStorage.getItem("light");(null==g||"true"!==g&&"false"!==g)&&localStorage.setItem("light","true");const f=localStorage.getItem("mouse");(null==f||"on"!==f&&"off"!==f)&&localStorage.setItem("mouse","on");const h="dark"===n?"#icon-sun":"#icon-Moon2",p="dark"===n?"#icon-sun":"#icon-moon";e.getAttribute("xlink:href")!==h&&e.setAttribute("xlink:href",h),t.getAttribute("xlink:href")!==p&&t.setAttribute("xlink:href",p)})(),d(),(()=>{const e=document.getElementById("recent-posts");if(!e||!e.classList.contains("masonry"))return;const t=()=>{const e=new InfiniteGrid.MasonryInfiniteGrid(".recent-post-items",{gap:{horizontal:10,vertical:20},useTransform:!0,useResizeObserver:!0});e.renderItems(),btf.addGlobalFn("pjaxCompleteOnce",(()=>{e.destroy()}),"removeJustifiedIndexPostUI")};"function"==typeof InfiniteGrid?t():getScript(`${GLOBAL_CONFIG.infinitegrid.js}`).then(t)})(),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(()=>{const e=document.getElementById("post-outdate-notice");if(!e)return;const{limitDay:t,messagePrev:n,messageNext:o,postUpdate:s}=JSON.parse(e.getAttribute("data")),l=btf.diffDate(s);l>=t&&(e.textContent=`${n} ${l} ${o}`,e.hidden=!1)})(),GLOBAL_CONFIG.relativeDate.post&&A(document.querySelectorAll("#post-meta time"))):(GLOBAL_CONFIG.relativeDate.homepage&&A(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(()=>{const e=document.getElementById("runtimeshow");if(e){const t=e.getAttribute("data-publishDate");e.textContent=`${btf.diffDate(t)} ${GLOBAL_CONFIG.runtime}`}})(),(()=>{const e=document.getElementById("last-push-date");if(e){const t=e.getAttribute("data-lastPushDate");e.textContent=btf.diffDate(t,!0)}})(),(()=>{const e=document.querySelector("#aside-cat-list.expandBtn");if(!e)return;btf.addEventListenerPjax("click",e,(e=>{const t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))}),"handleToggleBtn",!0)})()),GLOBAL_CONFIG_SITE.isHome&&(()=>{const e=document.getElementById("scroll-down");e&&btf.addEventListenerPjax("click",e,(()=>{btf.scrollToDest(document.getElementById("home_top").offsetTop,300)}),"handleScrollToDest")})(),(()=>{let e=0,t="";const n=document.getElementById("page-header"),o=document.getElementById("rightside"),s=document.getElementById("fps"),l=document.getElementById("name-container"),i=document.getElementsByClassName("menus_items"),a=document.getElementById("page-name"),c=document.querySelector(".rmMask"),r=document.querySelector("#go-up"),d=document.getElementById("nav"),m=window.scrollY||document.documentElement.scrollTop,u=()=>{"/life/music/"!==window.location.pathname&&(n.classList.contains("nav-fixed")||n.classList.add("nav-fixed"),o.classList.contains("rightside-show")||"block"!==localStorage.getItem("rs")||o.classList.add("rightside-show"),s.classList.contains("fps-show")||"1"!==localStorage.getItem("fpson")||s.classList.add("fps-show"))};l.classList.add("visible"),m>60&&u(),"1"===localStorage.getItem("nav")?d.classList.contains("permanent")||d.classList.add("permanent"):d.classList.remove("permanent"),a.innerText=document.title.split(" | MuXiaoChenğŸŠ")[0];const g=btf.throttle((()=>{const a=window.scrollY||document.documentElement.scrollTop,d=a>e;if(e=a,a>60?(""===t&&u(),d?"down"!==t&&(n.classList.remove("nav-visible"),l.classList.remove("visible"),i[1].classList.add("visible"),t="down"):"up"!==t&&(n.classList.add("nav-visible"),l.classList.add("visible"),i[1].classList.remove("visible"),t="up")):(t="",a<=5&&n.classList.remove("nav-fixed","nav-visible"),o.classList.remove("rightside-show"),s.classList.remove("fps-show"),l.classList.add("visible"),i[1].classList.remove("visible")),r&&r.childNodes.length>=2){let e=document.documentElement.scrollTop,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100);btf.rmf.showRightMenu(!1),c&&(c.style.display="none"),n<95?(r.childNodes[0].style.display="none",r.childNodes[1].style.display="block",r.childNodes[1].innerHTML=n+"<span>%</span>"):(r.childNodes[1].style.display="none",r.childNodes[0].style.display="block")}}),96);btf.addEventListenerPjax("scroll",window,g,"handleScroll",{passive:!0})})(),O(),btf.switchComments(document),(()=>{const e=document.getElementById("toggle-menu");e&&btf.addEventListenerPjax("click",e,(()=>{s()}),"openMobileMenu")})(),G(),y(),v.forEach((e=>{btf.addEventListenerPjax(e.event,e.selector,e.callback,e.eventName)})),u()};btf.addGlobalFn("pjaxComplete",_,"refreshFn"),_(),(()=>{window.addEventListener("resize",(()=>{o(!1),n&&btf.isHidden(document.getElementById("toggle-menu"))&&l()}));const e=document.getElementById("menu-mask");e&&e.addEventListener("click",(()=>{l()})),(()=>{const e=document.querySelector("#sidebar-menus .menus_items");e&&e.addEventListener("click",(e=>{const t=e.target.closest(".site-page.group");t&&t.classList.toggle("hide")}))})(),GLOBAL_CONFIG.islazyloadPlugin&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"}),btf.addGlobalFn("pjaxComplete",(()=>{window.lazyLoadInstance.update()}),"lazyload")),void 0!==GLOBAL_CONFIG.copyright&&(()=>{const{limitCount:e,languages:t}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",(n=>{n.preventDefault();const o=window.getSelection(0).toString();let s=o;return o.length>e&&(s=`${o}\n\n\n${t.author}\n${t.link}${window.location.href}\n${t.source}\n${t.info}`),n.clipboardData?n.clipboardData.setData("text",s):window.clipboardData.setData("text",s)}))})()})()}));