(()=>{const t={debounce:(t,e=0,o=!1)=>{let n;return(...i)=>{const s=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||t(...i)}),e),s&&t(...i)}},throttle:function(t,e,o={}){let n,i,s,a=0;const r=()=>{a=!1===o.leading?0:(new Date).getTime(),n=null,t.apply(i,s),n||(i=s=null)};return(...l)=>{const c=(new Date).getTime();a||!1!==o.leading||(a=c);const d=e-(c-a);i=this,s=l,d<=0||d>e?(n&&(clearTimeout(n),n=null),a=c,t.apply(i,s),n||(i=s=null)):n||!1===o.trailing||(n=setTimeout(r,d))}},addGlobalFn:(t,e,o=!1,n=window)=>{const i=n.globalFn||{};i[t]=i[t]||{},i[t][o||Object.keys(i[t]).length]=e,n.globalFn=i},addEventListenerPjax:(t,e,o,n,i=!1)=>{btf.addGlobalListener(t,e,o,n,i),e instanceof NodeList?e.forEach((e=>{btf.addGlobalFn("pjaxSendOnce",(()=>{e.removeEventListener(t,o,i)}))})):btf.addGlobalFn("pjaxSendOnce",(()=>{e.removeEventListener(t,o,i)}))},removeGlobalFnEvent:(t,e=window)=>{const o=e.globalFn||{},n=o[t];n&&(Object.keys(n).forEach((t=>n[t]())),delete o[t])},overflowPaddingR:{add:()=>{const t=window.innerWidth-document.body.clientWidth;if(t>0){document.body.style.paddingRight=`${t}px`,document.body.style.overflow="hidden";const e=document.querySelector("#page-header.nav-fixed #menus");e&&(e.style.paddingRight=`${t}px`)}},remove:()=>{document.body.style.paddingRight="",document.body.style.overflow="";const t=document.querySelector("#page-header.nav-fixed #menus");t&&(t.style.paddingRight="")}},snackbarShow:(t,e=!1,o=2e3)=>{const{position:n,bgLight:i,bgDark:s}=GLOBAL_CONFIG.Snackbar,a="light"===document.documentElement.getAttribute("data-theme")?i:s;Snackbar.show({text:t,backgroundColor:a,showAction:e,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(t,e=!1)=>{const o=new Date,n=new Date(t),i=(o-n)/1e3/60,s=i/60,a=s/24,r=a/30,{dateSuffix:l}=GLOBAL_CONFIG;return e?r>12?n.toISOString().slice(0,10):r>=1?`${Math.floor(r)} ${l.month}`:a>=1?`${Math.floor(a)} ${l.day}`:s>=1?`${Math.floor(s)} ${l.hour}`:i>=1?`${Math.floor(i)} ${l.min}`:l.just:Math.floor(a)},loadComment:(t,e)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((t=>{t[0].isIntersecting&&(e(),o.disconnect())}),{threshold:[0]});o.observe(t)}else e()},scrollToDest:(t,e=500)=>{const o=window.scrollY;if(o>t&&(t-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:t,behavior:"smooth"});const n=performance.now(),i=s=>{const a=s-n,r=Math.min(a/e,1);window.scrollTo(0,o+(t-o)*r),r<1&&requestAnimationFrame(i)};requestAnimationFrame(i)},animateIn:(t,e)=>{t.style.display="block",t.style.animation=e},animateOut:(t,e)=>{const o=()=>{t.style.display="",t.style.animation="",t.removeEventListener("animationend",o)};t.addEventListener("animationend",o),t.style.animation=e},getParents:(t,e)=>{for(;t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null},siblings:(t,e)=>[...t.parentNode.children].filter((o=>e?o!==t&&o.matches(e):o!==t)),wrap:(t,e,o)=>{const n=document.createElement(e);for(const[t,e]of Object.entries(o))n.setAttribute(t,e);t.parentNode.insertBefore(n,t),n.appendChild(t)},unwrap:t=>{const e=t.parentNode;e!==document.body&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},isHidden:t=>0===t.offsetHeight&&0===t.offsetWidth,getEleTop:t=>{let e=t.offsetTop,o=t.offsetParent;for(;null!==o;)e+=o.offsetTop,o=o.offsetParent;return e},loadLightbox:t=>{const e=GLOBAL_CONFIG.lightbox;"medium_zoom"===e&&mediumZoom(t,{background:"var(--zoom-bg)"}),"fancybox"===e&&(Array.from(t).forEach((t=>{if("A"!==t.parentNode.tagName){const e=t.dataset.lazySrc||t.src,o=t.title||t.alt||"";btf.wrap(t,"a",{href:e,"data-fancybox":"gallery","data-caption":o,"data-thumb":e})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}),window.fancyboxRun=!0))},initJustifiedGallery:function(t){t.forEach((function(t){btf.isHidden(t)||fjGallery(t,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:t=>{if(t!==window.location.hash){t||(t=location.pathname);const e=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:e},e,t)}},getScrollPercent:(()=>{let t,e,o,n;return(i,s)=>{t&&s.clientHeight===t||(t=s.clientHeight,e=window.innerHeight,o=s.offsetTop,n=Math.max(t-e,document.documentElement.scrollHeight-e));const a=(i-o)/n;return Math.max(0,Math.min(100,Math.round(100*a)))}})(),linkCom:t=>{const e=document.querySelector(".el-textarea__inner");"bf"===t?(e.value="```yml\n",e.value+="- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ",e.value+="\n```",e.setSelectionRange(15,15)):(e.value="站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：",e.setSelectionRange(5,5)),e.focus()},initItem(t){localStorage.setItem("blogbg","default"),localStorage.setItem("universe","block"),localStorage.setItem("blur","0"),localStorage.setItem("fpson","1"),localStorage.setItem("transNum","85"),localStorage.setItem("blurRad","20"),localStorage.setItem("font","LXGW"),localStorage.setItem("themeColor","green"),localStorage.setItem("rs","block"),localStorage.setItem("mouse","on"),localStorage.setItem("light","true"),localStorage.setItem("snow","none"),localStorage.setItem("aside","1"),localStorage.setItem("asidePos","1"),localStorage.setItem("nav","1"),localStorage.setItem("defaultMusic",JSON.stringify(t)),localStorage.setItem("localMusic",JSON.stringify(t))},$notify(t,e,o,n=5e3){const i=Toastify({text:"",duration:n,gravity:"top",position:"left",stopOnFocus:!1,style:{width:"auto",padding:"0",borderRadius:"8px",textAlign:"left",boxShadow:"0 3px 7px 0 rgba(0, 0, 0, .25)",background:"linear-gradient(145deg, #ffffff, #f8f9fa)",color:"#2d3436",maxWidth:"480px",border:"1px solid rgba(0, 0, 0, 0.08)",overflow:"hidden",backdropFilter:"blur(4px)"},node:(()=>{const s=document.createElement("div");s.style.padding="16px 25px";const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="space-between",a.style.alignItems="center",a.style.marginBottom="12px";const r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.gap="12px";const l=document.createElement("i");switch(o){case"success":l.className="fas fa-check-circle";break;case"error":l.className="fas fa-times-circle";break;case"warning":l.className="fas fa-exclamation-circle";break;default:l.style.color="fas fa-check-circle"}l.style.color="var(--theme-color)",l.style.fontSize="20px";const c=document.createElement("div");c.textContent=t,c.style.fontWeight="600",c.style.fontSize="17px",c.style.color="#2d3436",c.style.letterSpacing="0.3px",r.appendChild(l),r.appendChild(c);const d=document.createElement("div");d.innerHTML="<i class='fas fa-times'></i>",d.style.cursor="pointer",d.style.padding="4px",d.style.borderRadius="50%",d.style.transition="all 0.2s",d.style.color="var(--theme-color)",d.style.fontSize="16px",a.appendChild(r),a.appendChild(d);const h=document.createElement("div");h.textContent=e,h.style.fontSize="15px",h.style.lineHeight="1.5",h.style.color="#495057",h.style.paddingLeft="32px";const m=document.createElement("div");return m.style.height="3px",m.style.background="var(--theme-color)",m.style.position="absolute",m.style.bottom="0",m.style.left="0",m.style.width="100%",m.style.animation=`progressToast ${n}ms linear  1 forwards`,s.appendChild(a),s.appendChild(h),s.appendChild(m),d.addEventListener("click",(()=>i.hideToast())),s})()}).showToast()},snowflake(){navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||"block"!==localStorage.getItem("snow")||"light"!==document.getElementsByTagName("html")[0].getAttribute("data-theme")||window&&(()=>{const t=(t,o,n,i,s,a,r)=>{const l=2*Math.PI/6;t.save(),t.translate(o,n),t.rotate(r),t.strokeStyle="rgba("+s+", "+a+")",t.lineWidth=.05*i;for(let o=0;o<6;o++)t.rotate(l),e(t,i);t.restore()},e=(t,e)=>{const o=1.3*e,n=.4*o,i=Math.PI/6;t.beginPath(),t.moveTo(0,0),t.lineTo(0,-o),t.stroke();for(let e=1;e<=6;e++){const s=o/7*e,a=Math.PI/16;t.beginPath(),t.moveTo(0,-s),t.lineTo(-n*Math.sin(i+a*e),-s-n*Math.cos(i+a*e)),t.stroke(),t.beginPath(),t.moveTo(0,-s),t.lineTo(n*Math.sin(i-a*e),-s-n*Math.cos(i-a*e)),t.stroke(),e%2==0&&(t.beginPath(),t.moveTo(n*Math.sin(i-a*e),-s-n*Math.cos(i-a*e)),t.lineTo(1.2*n*Math.sin(i-a*e+Math.PI/12),-s-1.2*n*Math.cos(i-a*e+Math.PI/12)),t.stroke())}const s=.2*o;for(let e=1;e<=4;e++){const n=o/5*e,a=Math.PI/20;t.beginPath(),t.moveTo(0,-n),t.lineTo(s*Math.sin(i+a*e),-n-s*Math.cos(i+a*e)),t.stroke(),t.beginPath(),t.moveTo(0,-n),t.lineTo(-s*Math.sin(i-a*e),-n-s*Math.cos(i-a*e)),t.stroke()}},o=(t,e,o,i,s,a,r)=>{const l=2*Math.PI/6;t.save(),t.translate(e,o),t.rotate(r),t.strokeStyle="rgba("+s+", "+a+")",t.lineWidth=.05*i;for(let e=0;e<6;e++)t.rotate(l),n(t,i);t.restore()},n=(t,e)=>{const o=1.3*e,n=Math.PI/6;t.beginPath(),t.moveTo(0,0),t.lineTo(0,-o),t.stroke();for(let e=1;e<=10;e++){const i=o/11*e,s=n+.1*e;t.beginPath(),t.moveTo(0,-i),t.lineTo(-i*Math.sin(s),-i-i*Math.cos(s)),t.stroke(),t.beginPath(),t.moveTo(0,-i),t.lineTo(i*Math.sin(s),-i-i*Math.cos(s)),t.stroke()}const i=.2*o;for(let e=1;e<=4;e++){const s=o/5*e,a=n+.1*e*1.5;t.beginPath(),t.moveTo(0,-s),t.lineTo(i*Math.sin(a),-s-i*Math.cos(a)),t.stroke(),t.beginPath(),t.moveTo(0,-s),t.lineTo(-i*Math.sin(a),-s-i*Math.cos(a)),t.stroke()}},i=(t,e,o,n,i,a,r)=>{const l=2*Math.PI/6;t.save(),t.translate(e,o),t.rotate(r),t.strokeStyle="rgba("+i+", "+a+")",t.lineWidth=.05*n;for(let e=0;e<6;e++)t.rotate(l),s(t,n);t.restore()},s=(t,e)=>{const o=1.2*e;t.beginPath(),t.moveTo(0,0),t.lineTo(0,-o),t.stroke(),a(t,o,0)},a=(t,e,o)=>{if(o>2)return;const n=.6*e,i=Math.PI/6;for(let s=0;s<3;s++){const r=i*(s-1);t.beginPath(),t.moveTo(0,-e),t.lineTo(n*Math.sin(r),-e-n*Math.cos(r)),t.stroke(),a(t,n,o+1)}},r={flakeCount:50,minDist:150,color:"255, 255, 255",size:6,speed:.5,opacity:.6,stepsize:.5,rotation:2*Math.PI,rotationSpeed:.02,snowflakeMethod:t},l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},c=document.getElementById("snow"),d=c.getContext("2d"),h=r.flakeCount;let m=-100,u=-100,g=[];c.width=window.innerWidth,c.height=window.innerHeight;const p=()=>{d.clearRect(0,0,c.width,c.height);const t=r.minDist;for(let e=0;e<h;e++){let o=g[e];const n=m,i=u,s=o.x,a=o.y,l=Math.sqrt((n-s)*(n-s)+(i-a)*(i-a));if(l<t){const e=(n-s)/l,r=(i-a)/l,c=t/(l*l)/2;o.velX-=c*e,o.velY-=c*r}else o.velX*=.98,o.velY<o.speed&&o.speed-o.velY>.01&&(o.velY+=.01*(o.speed-o.velY)),o.velX+=Math.cos(o.step+=.05)*o.stepSize;o.rotation+=o.rotationSpeed,o.y+=o.velY,o.x+=o.velX,(o.y>=c.height||o.y<=0)&&(o.opacity-=.02,o.opacity<=0&&f(o)),(o.x>=c.width||o.x<=0)&&(o.opacity-=.02,o.opacity<=0&&f(o)),o.snowflakeMethod(d,o.x,o.y,o.size,r.color,o.opacity,o.rotation)}btf.snowId=l(p)},f=e=>{e.x=Math.floor(Math.random()*c.width),e.y=0,e.size=4*Math.random()+r.size,e.speed=Math.random()+r.speed,e.velY=e.speed,e.velX=0,e.opacity=.6*Math.random()+r.opacity,e.rotation=Math.random()*r.rotation,e.rotationSpeed=(Math.random()-.5)*r.rotationSpeed,e.snowflakeMethod=(()=>{const e=[t,o,i];return e[Math.floor(Math.random()*e.length)]})()};document.addEventListener("mousemove",(t=>{m=t.clientX,u=t.clientY})),window.addEventListener("resize",((t,e)=>{let o=0;return function(...n){const i=Date.now();i-o>=e&&(o=i,t(...n))}})((()=>{c.width=window.innerWidth,c.height=window.innerHeight}),50)),(()=>{for(let t=0;t<h;t++)g.push({speed:Math.random()+r.speed,velX:0,velY:Math.random()+r.speed,x:Math.floor(Math.random()*c.width),y:Math.floor(Math.random()*c.height),size:4*Math.random()+r.size,stepSize:Math.random()/30*r.stepsize,step:0,angle:180,opacity:.6*Math.random()+r.opacity,rotation:Math.random()*r.rotation,rotationSpeed:(Math.random()-.5)*r.rotationSpeed,snowflakeMethod:r.snowflakeMethod});p()})()})()},dark(){if("dark"!==document.getElementsByTagName("html")[0].getAttribute("data-theme")||"block"!==localStorage.getItem("universe"))return;const t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var e,o,n,i,s=.05,a=document.getElementById("universe"),r=!0,l="226,225,224",c=[];function d(){e=window.innerWidth,o=window.innerHeight,n=.216*e,a.setAttribute("width",e),a.setAttribute("height",o)}function h(){i.clearRect(0,0,e,o);for(var t=c.length,n=0;n<t;n++){var s=c[n];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function m(){this.reset=function(){this.giant=u(3),this.comet=!this.giant&&!r&&u(10),this.x=g(0,e-10),this.y=g(0,o),this.r=g(1.1,2.6),this.dx=g(s,6*s)+(this.comet+1-1)*s*g(50,120)+.1,this.dy=-g(s,6*s)-(this.comet+1-1)*s*g(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=g(.2,1-.4*(this.comet+1-1)),this.do=g(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>e||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(i.beginPath(),this.giant)i.fillStyle="rgba(180,184,240,"+this.opacity+")",i.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){i.fillStyle="rgba("+l+","+this.opacity+")",i.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var t=0;t<30;t++)i.fillStyle="rgba("+l+","+(this.opacity-this.opacity/20*t)+")",i.rect(this.x-this.dx/4*t,this.y-this.dy/4*t-2,2,2),i.fill()}else i.fillStyle="rgba(226,225,142,"+this.opacity+")",i.rect(this.x,this.y,this.r,this.r);i.closePath(),i.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>e-e/4||this.y<0)&&(this.fadingOut=!0)},setTimeout((function(){r=!1}),50)}function u(t){return Math.floor(1e3*Math.random())+1<10*t}function g(t,e){return Math.random()*(e-t)+t}d(),window.addEventListener("resize",d,!1),function(){i=a.getContext("2d");for(var t=0;t<n;t++)c[t]=new m,c[t].reset();h()}(),function e(){h(),btf.universeId=t(e)}()},checkWidth(){if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=800){window.cancelAnimationFrame(btf.sonwId);const t=document.getElementById("snow");t.getContext("2d").clearRect(0,0,t.width,t.height),window.cancelAnimationFrame(btf.universeId);const e=document.getElementById("universe");e.getContext("2d").clearRect(0,0,e.width,e.height)}else"light"===document.getElementsByTagName("html")[0].getAttribute("data-theme")?btf.snowflake():btf.dark()},addGlobalListener:(()=>{window.eventMap=window.eventMap||new Map;return(t,e,o,n,i=!1)=>{(t=>{if(window.eventMap.has(t)){const{event:e,selector:o,callback:n,option:i}=window.eventMap.get(t);o instanceof NodeList?o.forEach((t=>{t.removeEventListener(e,n,i)})):o.removeEventListener(e,n,i),window.eventMap.delete(t)}})(n),e instanceof NodeList?e.forEach((e=>{e.addEventListener(t,o,i)})):e.addEventListener(t,o,i),window.eventMap.set(n,{event:t,selector:e,callback:o,option:i})}})(),currentVersion:"v2.63",universeId:null,snowId:null,map:new Map([["red","rgb(241, 71, 71)"],["orange","rgb(241, 162, 71)"],["yellow","rgb(241, 238, 71)"],["purple","rgb(179, 71, 241)"],["blue","rgb(102, 204, 255)"],["gray","rgb(226, 226, 226)"],["green","rgb(57, 197, 187)"],["whitegray","rgb(241, 241, 241)"],["pink","rgb(237, 112, 155)"],["black","rgb(0, 0, 0)"],["darkblue","rgb(97, 100, 159)"],["heoblue","rgb(66, 90, 239)"]]),Cursor:class{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(t,e){this.cursor.style.left=`${t}px`,this.cursor.style.top=`${e}px`}getStyle2(t,e){try{return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}catch(t){console.error("getStyle error:",t)}return""}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));const t=document.getElementsByTagName("*");for(let e=0;e<t.length;e++)"pointer"==this.getStyle2(t[e],"cursor")&&this.pt.push(t[e].outerHTML);const e=btf.map.get(localStorage.getItem("themeColor"));document.head.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='"+e+"'/></svg>\") 4 4, auto}"}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmouseover=t=>this.pt.includes(t.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=t=>this.pt.includes(t.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=t=>{null==this.pos.curr&&this.move(t.clientX-8,t.clientY-8),this.pos.curr={x:t.clientX-8,y:t.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=t=>this.cursor.classList.remove("hidden"),document.onmouseleave=t=>this.cursor.classList.add("hidden"),document.onmousedown=t=>this.cursor.classList.add("active"),document.onmouseup=t=>this.cursor.classList.remove("active")}lerp(t,e,o){return(1-o)*t+o*e}render(){this.pos.prev?(this.pos.prev.x=this.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=this.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame((()=>this.render()))}}};window.btf={...window.btf,...t},Object.assign(window.btf,{CURSOR:new t.Cursor,currentVersion:t.currentVersion,universeId:t.universeId,snowId:t.snowId,map:t.map})})();