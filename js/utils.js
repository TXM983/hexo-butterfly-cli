const btf={debounce:function(e,t,o){let n;return function(){const s=this,r=arguments,i=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(s,r)}),t),i&&e.apply(s,r)}},throttle:function(e,t,o){let n,s,r,i=0;o||(o={});const a=function(){i=!1===o.leading?0:(new Date).getTime(),n=null,e.apply(s,r),n||(s=r=null)};return function(){const c=(new Date).getTime();i||!1!==o.leading||(i=c);const l=t-(c-i);s=this,r=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),i=c,e.apply(s,r),n||(s=r=null)):n||!1===o.trailing||(n=setTimeout(a,l))}},sidebarPaddingR:()=>{const e=window.innerWidth,t=document.body.clientWidth,o=e-t;e!==t&&(document.body.style.paddingRight=o+"px")},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:s,bgDark:r}=GLOBAL_CONFIG.Snackbar,i="light"===document.documentElement.getAttribute("data-theme")?s:r;Snackbar.show({text:e,backgroundColor:i,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),s=o.getTime()-n.getTime(),r=36e5,i=24*r;let a;if(t){const e=s/(30*i),t=s/i,o=s/r,c=s/6e4;a=e>12?n.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.month:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.day:o>=1?parseInt(o)+" "+GLOBAL_CONFIG.date_suffix.hour:c>=1?parseInt(c)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else a=parseInt(s/i);return a},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.pageYOffset;if(o>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let n=null;e=+e,window.requestAnimationFrame((function s(r){n=n||r;const i=r-n;o<e?window.scrollTo(0,(e-o)*i/t+o):window.scrollTo(0,o-(o-e)*i/t),i<t?window.requestAnimationFrame(s):window.scrollTo(0,e)}))},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((o=>t?o!==e&&o.matches(t):o!==e)),wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){const t=mediumZoom(e);t.on("open",(e=>{const o="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";t.update({background:o})}))}"fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){btf.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},linkCom:e=>{const t=document.querySelector(".el-textarea__inner");"bf"===e?(t.value="```yml\n",t.value+="- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ",t.value+="\n```",t.setSelectionRange(15,15)):(t.value="站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：",t.setSelectionRange(5,5)),t.focus()}},map=new Map;map.set("red","rgb(241, 71, 71)"),map.set("orange","rgb(241, 162, 71)"),map.set("yellow","rgb(241, 238, 71)"),map.set("purple","rgb(179, 71, 241)"),map.set("blue","rgb(102, 204, 255)"),map.set("gray","rgb(226, 226, 226)"),map.set("green","rgb(57, 197, 187)"),map.set("whitegray","rgb(241, 241, 241)"),map.set("pink","rgb(237, 112, 155)"),map.set("black","rgb(0, 0, 0)"),map.set("darkblue","rgb(97, 100, 159)"),map.set("heoblue","rgb(66, 90, 239)"),Math.lerp=(e,t,o)=>(1-o)*e+o*t;const getStyle2=(e,t)=>{try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch(e){}return""};class Cursor{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));var e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)"pointer"==getStyle2(e[t],"cursor")&&this.pt.push(e[t].outerHTML);var t=map.get(localStorage.getItem("themeColor"));document.head.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='"+t+"'/></svg>\") 4 4, auto}"}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmouseover=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=e=>{null==this.pos.curr&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=e=>this.cursor.classList.remove("hidden"),document.onmouseleave=e=>this.cursor.classList.add("hidden"),document.onmousedown=e=>this.cursor.classList.add("active"),document.onmouseup=e=>this.cursor.classList.remove("active")}render(){this.pos.prev?(this.pos.prev.x=Math.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=Math.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame((()=>this.render()))}}const CURSOR=new Cursor;Object.assign(window,{CURSOR:CURSOR,map:map});