(()=>{const e={debounce:(e,t=0,o=!1)=>{let n;return(...i)=>{const s=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e(...i)}),t),s&&e(...i)}},throttle:function(e,t,o={}){let n,i,s,a=0;const r=()=>{a=!1===o.leading?0:(new Date).getTime(),n=null,e.apply(i,s),n||(i=s=null)};return(...l)=>{const c=(new Date).getTime();a||!1!==o.leading||(a=c);const d=t-(c-a);i=this,s=l,d<=0||d>t?(n&&(clearTimeout(n),n=null),a=c,e.apply(i,s),n||(i=s=null)):n||!1===o.trailing||(n=setTimeout(r,d))}},addGlobalFn:(e,t,o=!1,n=window)=>{const i=n.globalFn||{};i[e]=i[e]||{},i[e][o||Object.keys(i[e]).length]=t,n.globalFn=i},addEventListenerPjax:(e,t,o,n,i=!1)=>{btf.addGlobalListener(e,t,o,n,i),t instanceof NodeList?t.forEach((t=>{btf.addGlobalFn("pjaxSendOnce",(()=>{t.removeEventListener(e,o,i)}))})):btf.addGlobalFn("pjaxSendOnce",(()=>{t.removeEventListener(e,o,i)}))},removeGlobalFnEvent:(e,t=window)=>{const o=t.globalFn||{},n=o[e];n&&(Object.keys(n).forEach((e=>n[e]())),delete o[e])},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`,document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");t&&(t.style.paddingRight=`${e}px`)}},remove:()=>{document.body.style.paddingRight="",document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");e&&(e.style.paddingRight="")}},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:i,bgDark:s}=GLOBAL_CONFIG.Snackbar,a="light"===document.documentElement.getAttribute("data-theme")?i:s;Snackbar.show({text:e,backgroundColor:a,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),i=(o-n)/1e3/60,s=i/60,a=s/24,r=a/30,{dateSuffix:l}=GLOBAL_CONFIG;return t?r>12?n.toISOString().slice(0,10):r>=1?`${Math.floor(r)} ${l.month}`:a>=1?`${Math.floor(a)} ${l.day}`:s>=1?`${Math.floor(s)} ${l.hour}`:i>=1?`${Math.floor(i)} ${l.min}`:l.just:Math.floor(a)},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.scrollY;if(o>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});const n=performance.now(),i=s=>{const a=s-n,r=Math.min(a/t,1);window.scrollTo(0,o+(e-o)*r),r<1&&requestAnimationFrame(i)};requestAnimationFrame(i)},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{const o=()=>{e.style.display="",e.style.animation="",e.removeEventListener("animationend",o)};e.addEventListener("animationend",o),e.style.animation=t},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((o=>t?o!==e&&o.matches(t):o!==e)),wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;"medium_zoom"===t&&mediumZoom(e,{background:"var(--zoom-bg)"}),"fancybox"===t&&(Array.from(e).forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){btf.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let e,t,o,n;return(i,s)=>{e&&s.clientHeight===e||(e=s.clientHeight,t=window.innerHeight,o=s.offsetTop,n=Math.max(e-t,document.documentElement.scrollHeight-t));const a=(i-o)/n;return Math.max(0,Math.min(100,Math.round(100*a)))}})(),linkCom:e=>{const t=document.querySelector(".el-textarea__inner");"bf"===e?(t.value="```yml\n",t.value+="- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ",t.value+="\n```",t.setSelectionRange(15,15)):(t.value="站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：",t.setSelectionRange(5,5)),t.focus()},initItem(e){localStorage.setItem("blogbg","default"),localStorage.setItem("universe","block"),localStorage.setItem("blur","0"),localStorage.setItem("fpson","1"),localStorage.setItem("transNum","85"),localStorage.setItem("blurRad","20"),localStorage.setItem("font","LXGW"),localStorage.setItem("themeColor","green"),localStorage.setItem("rs","block"),localStorage.setItem("mouse","on"),localStorage.setItem("light","true"),localStorage.setItem("snow","none"),localStorage.setItem("aside","1"),localStorage.setItem("asidePos","1"),localStorage.setItem("nav","1"),localStorage.setItem("defaultMusic",JSON.stringify(e)),localStorage.setItem("localMusic",JSON.stringify(e)),localStorage.removeItem("shuffledPlaylist"),localStorage.removeItem("shuffledMusicList")},$notify(e,t,o,n=5e3){const i=Toastify({text:"",duration:n,gravity:"top",position:"left",stopOnFocus:!1,style:{width:"auto",padding:"0",borderRadius:"8px",textAlign:"left",boxShadow:"0 3px 7px 0 rgba(0, 0, 0, .25)",background:"linear-gradient(145deg, #ffffff, #f8f9fa)",color:"#2d3436",maxWidth:"480px",border:"1px solid rgba(0, 0, 0, 0.08)",overflow:"hidden",backdropFilter:"blur(4px)"},node:(()=>{const s=document.createElement("div");s.style.padding="16px 25px";const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="space-between",a.style.alignItems="center",a.style.marginBottom="12px";const r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.gap="12px";const l=document.createElement("i");switch(o){case"success":l.className="fas fa-check-circle";break;case"error":l.className="fas fa-times-circle";break;case"warning":l.className="fas fa-exclamation-circle";break;default:l.style.color="fas fa-check-circle"}l.style.color="var(--theme-color)",l.style.fontSize="20px";const c=document.createElement("div");c.textContent=e,c.style.fontWeight="600",c.style.fontSize="17px",c.style.color="#2d3436",c.style.letterSpacing="0.3px",r.appendChild(l),r.appendChild(c);const d=document.createElement("div");d.innerHTML="<i class='fas fa-times'></i>",d.style.cursor="pointer",d.style.padding="4px",d.style.borderRadius="50%",d.style.transition="all 0.2s",d.style.color="var(--theme-color)",d.style.fontSize="16px",a.appendChild(r),a.appendChild(d);const h=document.createElement("div");h.textContent=t,h.style.fontSize="15px",h.style.lineHeight="1.5",h.style.color="#495057",h.style.paddingLeft="32px";const m=document.createElement("div");return m.style.height="3px",m.style.background="var(--theme-color)",m.style.position="absolute",m.style.bottom="0",m.style.left="0",m.style.width="100%",m.style.animation=`progressToast ${n}ms linear  1 forwards`,s.appendChild(a),s.appendChild(h),s.appendChild(m),d.addEventListener("click",(()=>i.hideToast())),s})()}).showToast()},snowflake(){navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||"block"!==localStorage.getItem("snow")||"light"!==document.documentElement.getAttribute("data-theme")||window&&(()=>{const e=(e,o,n,i,s,a,r)=>{const l=2*Math.PI/6;e.save(),e.translate(o,n),e.rotate(r),e.strokeStyle="rgba("+s+", "+a+")",e.lineWidth=.05*i;for(let o=0;o<6;o++)e.rotate(l),t(e,i);e.restore()},t=(e,t)=>{const o=1.3*t,n=.4*o,i=Math.PI/6;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke();for(let t=1;t<=6;t++){const s=o/7*t,a=Math.PI/16;e.beginPath(),e.moveTo(0,-s),e.lineTo(-n*Math.sin(i+a*t),-s-n*Math.cos(i+a*t)),e.stroke(),e.beginPath(),e.moveTo(0,-s),e.lineTo(n*Math.sin(i-a*t),-s-n*Math.cos(i-a*t)),e.stroke(),t%2==0&&(e.beginPath(),e.moveTo(n*Math.sin(i-a*t),-s-n*Math.cos(i-a*t)),e.lineTo(1.2*n*Math.sin(i-a*t+Math.PI/12),-s-1.2*n*Math.cos(i-a*t+Math.PI/12)),e.stroke())}const s=.2*o;for(let t=1;t<=4;t++){const n=o/5*t,a=Math.PI/20;e.beginPath(),e.moveTo(0,-n),e.lineTo(s*Math.sin(i+a*t),-n-s*Math.cos(i+a*t)),e.stroke(),e.beginPath(),e.moveTo(0,-n),e.lineTo(-s*Math.sin(i-a*t),-n-s*Math.cos(i-a*t)),e.stroke()}},o=(e,t,o,i,s,a,r)=>{const l=2*Math.PI/6;e.save(),e.translate(t,o),e.rotate(r),e.strokeStyle="rgba("+s+", "+a+")",e.lineWidth=.05*i;for(let t=0;t<6;t++)e.rotate(l),n(e,i);e.restore()},n=(e,t)=>{const o=1.3*t,n=Math.PI/6;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke();for(let t=1;t<=10;t++){const i=o/11*t,s=n+.1*t;e.beginPath(),e.moveTo(0,-i),e.lineTo(-i*Math.sin(s),-i-i*Math.cos(s)),e.stroke(),e.beginPath(),e.moveTo(0,-i),e.lineTo(i*Math.sin(s),-i-i*Math.cos(s)),e.stroke()}const i=.2*o;for(let t=1;t<=4;t++){const s=o/5*t,a=n+.1*t*1.5;e.beginPath(),e.moveTo(0,-s),e.lineTo(i*Math.sin(a),-s-i*Math.cos(a)),e.stroke(),e.beginPath(),e.moveTo(0,-s),e.lineTo(-i*Math.sin(a),-s-i*Math.cos(a)),e.stroke()}},i=(e,t,o,n,i,a,r)=>{const l=2*Math.PI/6;e.save(),e.translate(t,o),e.rotate(r),e.strokeStyle="rgba("+i+", "+a+")",e.lineWidth=.05*n;for(let t=0;t<6;t++)e.rotate(l),s(e,n);e.restore()},s=(e,t)=>{const o=1.2*t;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke(),a(e,o,0)},a=(e,t,o)=>{if(o>2)return;const n=.6*t,i=Math.PI/6;for(let s=0;s<3;s++){const r=i*(s-1);e.beginPath(),e.moveTo(0,-t),e.lineTo(n*Math.sin(r),-t-n*Math.cos(r)),e.stroke(),a(e,n,o+1)}},r={flakeCount:50,minDist:150,color:"255, 255, 255",size:6,speed:.5,opacity:.6,stepsize:.5,rotation:2*Math.PI,rotationSpeed:.02,snowflakeMethod:e},l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},c=document.getElementById("snow"),d=c.getContext("2d"),h=r.flakeCount;let m=-100,u=-100,f=[];c.width=window.innerWidth,c.height=window.innerHeight;const g=()=>{d.clearRect(0,0,c.width,c.height);const e=r.minDist;for(let t=0;t<h;t++){let o=f[t];const n=m,i=u,s=o.x,a=o.y,l=Math.sqrt((n-s)*(n-s)+(i-a)*(i-a));if(l<e){const t=(n-s)/l,r=(i-a)/l,c=e/(l*l)/2;o.velX-=c*t,o.velY-=c*r}else o.velX*=.98,o.velY<o.speed&&o.speed-o.velY>.01&&(o.velY+=.01*(o.speed-o.velY)),o.velX+=Math.cos(o.step+=.05)*o.stepSize;o.rotation+=o.rotationSpeed,o.y+=o.velY,o.x+=o.velX,(o.y>=c.height||o.y<=0)&&(o.opacity-=.02,o.opacity<=0&&p(o)),(o.x>=c.width||o.x<=0)&&(o.opacity-=.02,o.opacity<=0&&p(o)),o.snowflakeMethod(d,o.x,o.y,o.size,r.color,o.opacity,o.rotation)}btf.snowId=l(g)};document.addEventListener("visibilitychange",(()=>{if(document.hidden){window.cancelAnimationFrame(btf.snowId);const e=document.getElementById("snow");e.getContext("2d").clearRect(0,0,e.width,e.height)}else btf.universeId=l(g)}));const p=t=>{t.x=Math.floor(Math.random()*c.width),t.y=0,t.size=4*Math.random()+r.size,t.speed=Math.random()+r.speed,t.velY=t.speed,t.velX=0,t.opacity=.6*Math.random()+r.opacity,t.rotation=Math.random()*r.rotation,t.rotationSpeed=(Math.random()-.5)*r.rotationSpeed,t.snowflakeMethod=(()=>{const t=[e,o,i];return t[Math.floor(Math.random()*t.length)]})()};document.addEventListener("mousemove",(e=>{m=e.clientX,u=e.clientY})),window.addEventListener("resize",((e,t)=>{let o=0;return function(...n){const i=Date.now();i-o>=t&&(o=i,e(...n))}})((()=>{c.width=window.innerWidth,c.height=window.innerHeight}),50)),(()=>{for(let e=0;e<h;e++)f.push({speed:Math.random()+r.speed,velX:0,velY:Math.random()+r.speed,x:Math.floor(Math.random()*c.width),y:Math.floor(Math.random()*c.height),size:4*Math.random()+r.size,stepSize:Math.random()/30*r.stepsize,step:0,angle:180,opacity:.6*Math.random()+r.opacity,rotation:Math.random()*r.rotation,rotationSpeed:(Math.random()-.5)*r.rotationSpeed,snowflakeMethod:r.snowflakeMethod});g()})()})()},dark(){if("dark"!==document.documentElement.getAttribute("data-theme")||"block"!==localStorage.getItem("universe"))return;const e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;let t,o,n,i,s=.05,a=document.getElementById("universe"),r=!0,l="226,225,224",c=[];function d(){t=window.innerWidth,o=window.innerHeight,n=.216*t,a.setAttribute("width",t),a.setAttribute("height",o)}function h(){i.clearRect(0,0,t,o);for(var e=c.length,n=0;n<e;n++){var s=c[n];s.move(),s.fadeIn(),s.fadeOut(),s.draw()}}function m(){this.reset=function(){this.giant=u(3),this.comet=!this.giant&&!r&&u(10),this.x=f(0,t-10),this.y=f(0,o),this.r=f(1.1,2.6),this.dx=f(s,6*s)+(this.comet+1-1)*s*f(50,120)+.1,this.dy=-f(s,6*s)-(this.comet+1-1)*s*f(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=f(.2,1-.4*(this.comet+1-1)),this.do=f(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>t||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(i.beginPath(),this.giant)i.fillStyle="rgba(180,184,240,"+this.opacity+")",i.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){i.fillStyle="rgba("+l+","+this.opacity+")",i.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var e=0;e<30;e++)i.fillStyle="rgba("+l+","+(this.opacity-this.opacity/20*e)+")",i.rect(this.x-this.dx/4*e,this.y-this.dy/4*e-2,2,2),i.fill()}else i.fillStyle="rgba(226,225,142,"+this.opacity+")",i.rect(this.x,this.y,this.r,this.r);i.closePath(),i.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>t-t/4||this.y<0)&&(this.fadingOut=!0)},setTimeout((function(){r=!1}),50)}function u(e){return Math.floor(1e3*Math.random())+1<10*e}function f(e,t){return Math.random()*(t-e)+e}function g(){h(),btf.universeId=e(g)}d(),window.addEventListener("resize",d,!1),function(){i=a.getContext("2d");for(let e=0;e<n;e++)c[e]=new m,c[e].reset();h()}(),g(),document.addEventListener("visibilitychange",(()=>{if(document.hidden){window.cancelAnimationFrame(btf.universeId);const e=document.getElementById("universe");e.getContext("2d").clearRect(0,0,e.width,e.height)}else btf.universeId=e(g)}))},checkWidth(){if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=800){window.cancelAnimationFrame(btf.snowId);const e=document.getElementById("snow");e.getContext("2d").clearRect(0,0,e.width,e.height),window.cancelAnimationFrame(btf.universeId);const t=document.getElementById("universe");t.getContext("2d").clearRect(0,0,t.width,t.height)}else"light"===document.documentElement.getAttribute("data-theme")?btf.snowflake():btf.dark()},addGlobalListener:(()=>{window.eventMap=window.eventMap||new Map;return(e,t,o,n,i=!1)=>{(e=>{if(window.eventMap.has(e)){const{event:t,selector:o,callback:n,option:i}=window.eventMap.get(e);o instanceof NodeList?o.forEach((e=>{e.removeEventListener(t,n,i)})):o.removeEventListener(t,n,i),window.eventMap.delete(e)}})(n),t instanceof NodeList?t.forEach((t=>{t.addEventListener(e,o,i)})):t.addEventListener(e,o,i),window.eventMap.set(n,{event:e,selector:t,callback:o,option:i})}})(),currentVersion:"v2.66",universeId:null,snowId:null,map:new Map([["red","rgb(241, 71, 71)"],["orange","rgb(241, 162, 71)"],["yellow","rgb(241, 238, 71)"],["purple","rgb(179, 71, 241)"],["blue","rgb(102, 204, 255)"],["gray","rgb(226, 226, 226)"],["green","rgb(57, 197, 187)"],["whitegray","rgb(241, 241, 241)"],["pink","rgb(237, 112, 155)"],["black","rgb(0, 0, 0)"],["darkblue","rgb(97, 100, 159)"],["heoblue","rgb(66, 90, 239)"]]),Cursor:class{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`}getStyle2(e,t){try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch(e){console.error("getStyle error:",e)}return""}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));const e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)"pointer"==this.getStyle2(e[t],"cursor")&&this.pt.push(e[t].outerHTML);const t=btf.map.get(localStorage.getItem("themeColor"));document.head.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='"+t+"'/></svg>\") 4 4, auto}"}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init();const e=this.render();btf.addGlobalFn("pjaxSendOnce",(()=>{window.cancelAnimationFrame(e)}),"renderDestory")}init(){document.onmouseover=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=e=>this.pt.includes(e.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=e=>{null==this.pos.curr&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=e=>this.cursor.classList.remove("hidden"),document.onmouseleave=e=>this.cursor.classList.add("hidden"),document.onmousedown=e=>this.cursor.classList.add("active"),document.onmouseup=e=>this.cursor.classList.remove("active")}lerp(e,t,o){return(1-o)*e+o*t}render(){return this.pos.prev?(this.pos.prev.x=this.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=this.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame((()=>this.render()))}}};window.btf={...window.btf,...e},Object.assign(window.btf,{CURSOR:new e.Cursor,currentVersion:e.currentVersion,universeId:e.universeId,snowId:e.snowId,map:e.map})})();