(()=>{const e={debounce:(e,t=0,o=!1)=>{let n;return(...i)=>{const a=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e(...i)}),t),a&&e(...i)}},throttle:function(e,t,o={}){let n,i,a,s=0;const r=()=>{s=!1===o.leading?0:(new Date).getTime(),n=null,e.apply(i,a),n||(i=a=null)};return(...l)=>{const d=(new Date).getTime();s||!1!==o.leading||(s=d);const c=t-(d-s);i=this,a=l,c<=0||c>t?(n&&(clearTimeout(n),n=null),s=d,e.apply(i,a),n||(i=a=null)):n||!1===o.trailing||(n=setTimeout(r,c))}},addGlobalFn:(e,t,o=!1,n=window)=>{const i=n.globalFn||{};i[e]=i[e]||{},i[e][o||Object.keys(i[e]).length]=t,n.globalFn=i},addEventListenerPjax:(e,t,o,n,i=!1)=>{btf.addGlobalListener(e,t,o,n,i),t instanceof NodeList?t.forEach((t=>{btf.addGlobalFn("pjaxSendOnce",(()=>{t.removeEventListener(e,o,i)}))})):btf.addGlobalFn("pjaxSendOnce",(()=>{t.removeEventListener(e,o,i)}))},removeGlobalFnEvent:(e,t=window)=>{const o=t.globalFn||{},n=o[e];n&&(Object.keys(n).forEach((e=>n[e]())),delete o[e])},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`,document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");t&&(t.style.paddingRight=`${e}px`)}},remove:()=>{document.body.style.paddingRight="",document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");e&&(e.style.paddingRight="")}},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar,s="light"===document.documentElement.getAttribute("data-theme")?i:a;Snackbar.show({text:e,backgroundColor:s,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),i=(o-n)/1e3/60,a=i/60,s=a/24,r=s/30,{dateSuffix:l}=GLOBAL_CONFIG;return t?r>12?n.toISOString().slice(0,10):r>=1?`${Math.floor(r)} ${l.month}`:s>=1?`${Math.floor(s)} ${l.day}`:a>=1?`${Math.floor(a)} ${l.hour}`:i>=1?`${Math.floor(i)} ${l.min}`:l.just:Math.floor(s)},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.scrollY;if(o>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});const n=performance.now(),i=a=>{const s=a-n,r=Math.min(s/t,1);window.scrollTo(0,o+(e-o)*r),r<1&&requestAnimationFrame(i)};requestAnimationFrame(i)},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{const o=()=>{e.style.display="",e.style.animation="",e.removeEventListener("animationend",o)};e.addEventListener("animationend",o),e.style.animation=t},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((o=>t?o!==e&&o.matches(t):o!==e)),wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;"medium_zoom"===t&&mediumZoom(e,{background:"var(--zoom-bg)"}),"fancybox"===t&&(Array.from(e).forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){btf.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let e,t,o,n;return(i,a)=>{e&&a.clientHeight===e||(e=a.clientHeight,t=window.innerHeight,o=a.offsetTop,n=Math.max(e-t,document.documentElement.scrollHeight-t));const s=(i-o)/n;return Math.max(0,Math.min(100,Math.round(100*s)))}})(),linkCom:e=>{const t=document.querySelector(".el-textarea__inner");"bf"===e?(t.value="```yml\n",t.value+="- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ",t.value+="\n```",t.setSelectionRange(15,15)):(t.value="站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：",t.setSelectionRange(5,5)),t.focus()},initItem(e){localStorage.setItem("blogbg","default"),localStorage.setItem("universe","block"),localStorage.setItem("blur","0"),localStorage.setItem("fpson","1"),localStorage.setItem("transNum","85"),localStorage.setItem("blurRad","20"),localStorage.setItem("font","LXGW"),localStorage.setItem("themeColor","green"),localStorage.setItem("rs","block"),localStorage.setItem("mouse","on"),localStorage.setItem("light","true"),localStorage.setItem("snow","none"),localStorage.setItem("aside","1"),localStorage.setItem("asidePos","1"),localStorage.setItem("nav","1"),localStorage.setItem("defaultMusic",JSON.stringify(e)),localStorage.setItem("localMusic",JSON.stringify(e)),localStorage.removeItem("shuffledPlaylist"),localStorage.removeItem("shuffledMusicList")},$notify(e,t,o,n=5e3){const i=Toastify({text:"",duration:n,gravity:"top",position:"left",stopOnFocus:!1,style:{width:"auto",padding:"0",borderRadius:"8px",textAlign:"left",boxShadow:"0 3px 7px 0 rgba(0, 0, 0, .25)",background:"linear-gradient(145deg, #ffffff, #f8f9fa)",color:"#2d3436",maxWidth:"480px",border:"1px solid rgba(0, 0, 0, 0.08)",overflow:"hidden",backdropFilter:"blur(4px)"},node:(()=>{const a=document.createElement("div");a.style.padding="16px 25px";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="12px";const r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.gap="12px";const l=document.createElement("i");switch(o){case"success":l.className="fas fa-check-circle";break;case"error":l.className="fas fa-times-circle";break;case"warning":l.className="fas fa-exclamation-circle";break;default:l.style.color="fas fa-check-circle"}l.style.color="var(--theme-color)",l.style.fontSize="20px";const d=document.createElement("div");d.textContent=e,d.style.fontWeight="600",d.style.fontSize="17px",d.style.color="#2d3436",d.style.letterSpacing="0.3px",r.appendChild(l),r.appendChild(d);const c=document.createElement("div");c.innerHTML="<i class='fas fa-times'></i>",c.style.cursor="pointer",c.style.padding="4px",c.style.borderRadius="50%",c.style.transition="all 0.2s",c.style.color="var(--theme-color)",c.style.fontSize="16px",s.appendChild(r),s.appendChild(c);const h=document.createElement("div");h.textContent=t,h.style.fontSize="15px",h.style.lineHeight="1.5",h.style.color="#495057",h.style.paddingLeft="32px";const m=document.createElement("div");return m.style.height="3px",m.style.background="var(--theme-color)",m.style.position="absolute",m.style.bottom="0",m.style.left="0",m.style.width="100%",m.style.animation=`progressToast ${n}ms linear  1 forwards`,a.appendChild(s),a.appendChild(h),a.appendChild(m),c.addEventListener("click",(()=>i.hideToast())),a})()}).showToast()},snowflake(){navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||"block"!==localStorage.getItem("snow")||"light"!==document.documentElement.getAttribute("data-theme")||window&&(()=>{const e=(e,o,n,i,a,s,r)=>{const l=2*Math.PI/6;e.save(),e.translate(o,n),e.rotate(r),e.strokeStyle="rgba("+a+", "+s+")",e.lineWidth=.05*i;for(let o=0;o<6;o++)e.rotate(l),t(e,i);e.restore()},t=(e,t)=>{const o=1.3*t,n=.4*o,i=Math.PI/6;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke();for(let t=1;t<=6;t++){const a=o/7*t,s=Math.PI/16;e.beginPath(),e.moveTo(0,-a),e.lineTo(-n*Math.sin(i+s*t),-a-n*Math.cos(i+s*t)),e.stroke(),e.beginPath(),e.moveTo(0,-a),e.lineTo(n*Math.sin(i-s*t),-a-n*Math.cos(i-s*t)),e.stroke(),t%2==0&&(e.beginPath(),e.moveTo(n*Math.sin(i-s*t),-a-n*Math.cos(i-s*t)),e.lineTo(1.2*n*Math.sin(i-s*t+Math.PI/12),-a-1.2*n*Math.cos(i-s*t+Math.PI/12)),e.stroke())}const a=.2*o;for(let t=1;t<=4;t++){const n=o/5*t,s=Math.PI/20;e.beginPath(),e.moveTo(0,-n),e.lineTo(a*Math.sin(i+s*t),-n-a*Math.cos(i+s*t)),e.stroke(),e.beginPath(),e.moveTo(0,-n),e.lineTo(-a*Math.sin(i-s*t),-n-a*Math.cos(i-s*t)),e.stroke()}},o=(e,t,o,i,a,s,r)=>{const l=2*Math.PI/6;e.save(),e.translate(t,o),e.rotate(r),e.strokeStyle="rgba("+a+", "+s+")",e.lineWidth=.05*i;for(let t=0;t<6;t++)e.rotate(l),n(e,i);e.restore()},n=(e,t)=>{const o=1.3*t,n=Math.PI/6;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke();for(let t=1;t<=10;t++){const i=o/11*t,a=n+.1*t;e.beginPath(),e.moveTo(0,-i),e.lineTo(-i*Math.sin(a),-i-i*Math.cos(a)),e.stroke(),e.beginPath(),e.moveTo(0,-i),e.lineTo(i*Math.sin(a),-i-i*Math.cos(a)),e.stroke()}const i=.2*o;for(let t=1;t<=4;t++){const a=o/5*t,s=n+.1*t*1.5;e.beginPath(),e.moveTo(0,-a),e.lineTo(i*Math.sin(s),-a-i*Math.cos(s)),e.stroke(),e.beginPath(),e.moveTo(0,-a),e.lineTo(-i*Math.sin(s),-a-i*Math.cos(s)),e.stroke()}},i=(e,t,o,n,i,s,r)=>{const l=2*Math.PI/6;e.save(),e.translate(t,o),e.rotate(r),e.strokeStyle="rgba("+i+", "+s+")",e.lineWidth=.05*n;for(let t=0;t<6;t++)e.rotate(l),a(e,n);e.restore()},a=(e,t)=>{const o=1.2*t;e.beginPath(),e.moveTo(0,0),e.lineTo(0,-o),e.stroke(),s(e,o,0)},s=(e,t,o)=>{if(o>2)return;const n=.6*t,i=Math.PI/6;for(let a=0;a<3;a++){const r=i*(a-1);e.beginPath(),e.moveTo(0,-t),e.lineTo(n*Math.sin(r),-t-n*Math.cos(r)),e.stroke(),s(e,n,o+1)}},r={flakeCount:50,minDist:150,color:"255, 255, 255",size:6,speed:.5,opacity:.6,stepsize:.5,rotation:2*Math.PI,rotationSpeed:.02,snowflakeMethod:e},l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},d=document.getElementById("snow"),c=d.getContext("2d"),h=r.flakeCount;let m=-100,u=-100,f=[];d.width=window.innerWidth,d.height=window.innerHeight;const g=()=>{c.clearRect(0,0,d.width,d.height);const e=r.minDist;for(let t=0;t<h;t++){let o=f[t];const n=m,i=u,a=o.x,s=o.y,l=Math.sqrt((n-a)*(n-a)+(i-s)*(i-s));if(l<e){const t=(n-a)/l,r=(i-s)/l,d=e/(l*l)/2;o.velX-=d*t,o.velY-=d*r}else o.velX*=.98,o.velY<o.speed&&o.speed-o.velY>.01&&(o.velY+=.01*(o.speed-o.velY)),o.velX+=Math.cos(o.step+=.05)*o.stepSize;o.rotation+=o.rotationSpeed,o.y+=o.velY,o.x+=o.velX,(o.y>=d.height||o.y<=0)&&(o.opacity-=.02,o.opacity<=0&&w(o)),(o.x>=d.width||o.x<=0)&&(o.opacity-=.02,o.opacity<=0&&w(o)),o.snowflakeMethod(c,o.x,o.y,o.size,r.color,o.opacity,o.rotation)}btf.snowId=l(g)};document.addEventListener("visibilitychange",(()=>{if(document.hidden){window.cancelAnimationFrame(btf.snowId);const e=document.getElementById("snow");e.getContext("2d").clearRect(0,0,e.width,e.height)}else btf.snowId=l(g)}));const w=t=>{t.x=Math.floor(Math.random()*d.width),t.y=0,t.size=4*Math.random()+r.size,t.speed=Math.random()+r.speed,t.velY=t.speed,t.velX=0,t.opacity=.6*Math.random()+r.opacity,t.rotation=Math.random()*r.rotation,t.rotationSpeed=(Math.random()-.5)*r.rotationSpeed,t.snowflakeMethod=(()=>{const t=[e,o,i];return t[Math.floor(Math.random()*t.length)]})()};document.addEventListener("mousemove",(e=>{m=e.clientX,u=e.clientY})),window.addEventListener("resize",((e,t)=>{let o=0;return function(...n){const i=Date.now();i-o>=t&&(o=i,e(...n))}})((()=>{d.width=window.innerWidth,d.height=window.innerHeight}),50)),(()=>{for(let e=0;e<h;e++)f.push({speed:Math.random()+r.speed,velX:0,velY:Math.random()+r.speed,x:Math.floor(Math.random()*d.width),y:Math.floor(Math.random()*d.height),size:4*Math.random()+r.size,stepSize:Math.random()/30*r.stepsize,step:0,angle:180,opacity:.6*Math.random()+r.opacity,rotation:Math.random()*r.rotation,rotationSpeed:(Math.random()-.5)*r.rotationSpeed,snowflakeMethod:r.snowflakeMethod});g()})()})()},dark(){if("dark"!==document.documentElement.getAttribute("data-theme")||"block"!==localStorage.getItem("universe"))return;const e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;let t,o,n,i,a=.05,s=document.getElementById("universe"),r=!0,l="226,225,224",d=[];function c(){t=window.innerWidth,o=window.innerHeight,n=.216*t,s.setAttribute("width",t),s.setAttribute("height",o)}function h(){i.clearRect(0,0,t,o);for(var e=d.length,n=0;n<e;n++){var a=d[n];a.move(),a.fadeIn(),a.fadeOut(),a.draw()}}function m(){this.reset=function(){this.giant=u(3),this.comet=!this.giant&&!r&&u(10),this.x=f(0,t-10),this.y=f(0,o),this.r=f(1.1,2.6),this.dx=f(a,6*a)+(this.comet+1-1)*a*f(50,120)+.1,this.dy=-f(a,6*a)-(this.comet+1-1)*a*f(50,120),this.fadingOut=null,this.fadingIn=!0,this.opacity=0,this.opacityTresh=f(.2,1-.4*(this.comet+1-1)),this.do=f(5e-4,.002)+.001*(this.comet+1-1)},this.fadeIn=function(){this.fadingIn&&(this.fadingIn=!(this.opacity>this.opacityTresh),this.opacity+=this.do)},this.fadeOut=function(){this.fadingOut&&(this.fadingOut=!(this.opacity<0),this.opacity-=this.do/2,(this.x>t||this.y<0)&&(this.fadingOut=!1,this.reset()))},this.draw=function(){if(i.beginPath(),this.giant)i.fillStyle="rgba(180,184,240,"+this.opacity+")",i.arc(this.x,this.y,2,0,2*Math.PI,!1);else if(this.comet){i.fillStyle="rgba("+l+","+this.opacity+")",i.arc(this.x,this.y,1.5,0,2*Math.PI,!1);for(var e=0;e<30;e++)i.fillStyle="rgba("+l+","+(this.opacity-this.opacity/20*e)+")",i.rect(this.x-this.dx/4*e,this.y-this.dy/4*e-2,2,2),i.fill()}else i.fillStyle="rgba(226,225,142,"+this.opacity+")",i.rect(this.x,this.y,this.r,this.r);i.closePath(),i.fill()},this.move=function(){this.x+=this.dx,this.y+=this.dy,!1===this.fadingOut&&this.reset(),(this.x>t-t/4||this.y<0)&&(this.fadingOut=!0)},setTimeout((function(){r=!1}),50)}function u(e){return Math.floor(1e3*Math.random())+1<10*e}function f(e,t){return Math.random()*(t-e)+e}function g(){h(),btf.universeId=e(g)}c(),window.addEventListener("resize",c,!1),function(){i=s.getContext("2d");for(let e=0;e<n;e++)d[e]=new m,d[e].reset();h()}(),g(),document.addEventListener("visibilitychange",(()=>{if(document.hidden){window.cancelAnimationFrame(btf.universeId);const e=document.getElementById("universe");e.getContext("2d").clearRect(0,0,e.width,e.height)}else btf.universeId=e(g)}))},checkWidth(){if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=800){window.cancelAnimationFrame(btf.snowId);const e=document.getElementById("snow");e.getContext("2d").clearRect(0,0,e.width,e.height),window.cancelAnimationFrame(btf.universeId);const t=document.getElementById("universe");t.getContext("2d").clearRect(0,0,t.width,t.height)}else"light"===document.documentElement.getAttribute("data-theme")?btf.snowflake():btf.dark()},addGlobalListener:(()=>{window.eventMap=window.eventMap||new Map;return(e,t,o,n,i=!1)=>{(e=>{if(window.eventMap.has(e)){const{event:t,selector:o,callback:n,option:i}=window.eventMap.get(e);o instanceof NodeList?o.forEach((e=>{e.removeEventListener(t,n,i)})):o.removeEventListener(t,n,i),window.eventMap.delete(e)}})(n),t instanceof NodeList?t.forEach((t=>{t.addEventListener(e,o,i)})):t.addEventListener(e,o,i),window.eventMap.set(n,{event:e,selector:t,callback:o,option:i})}})(),currentVersion:"v2.66",universeId:null,snowId:null,map:new Map([["red","rgb(241, 71, 71)"],["orange","rgb(241, 162, 71)"],["yellow","rgb(241, 238, 71)"],["purple","rgb(179, 71, 241)"],["blue","rgb(102, 204, 255)"],["gray","rgb(226, 226, 226)"],["green","rgb(57, 197, 187)"],["whitegray","rgb(241, 241, 241)"],["pink","rgb(237, 112, 155)"],["black","rgb(0, 0, 0)"],["darkblue","rgb(97, 100, 159)"],["heoblue","rgb(66, 90, 239)"]]),fpsId:null,startFps(){const e=document.getElementById("fps"),t=e?.querySelector(".fps-num"),o=e?.querySelector(".fps-des");if(!e||!t||!o)return;const n=[{max:5,desc:"卡成ppt🤢",color:"#bd0000"},{max:15,desc:"电竞级帧率😖",color:"red"},{max:25,desc:"有点难受😨",color:"orange"},{max:35,desc:"不太流畅🙄",color:"#9338e6"},{max:45,desc:"还不错哦😁",color:"#08b7e4"},{max:1/0,desc:"十分流畅🤣",color:"#39c5bb"}];let i=0,a=0,s=0;const r=[],l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,d=e=>{if(i++,e>a+1e3){const l=Math.round(1e3*i/(e-a));r.push(l),r.length>3&&r.shift();const d=Math.round(r.reduce(((e,t)=>e+t))/r.length);if(e-s>250){const i=n.find((e=>d<=e.max));t.textContent=`FPS：${d}`,o.textContent=i.desc,o.style.color=i.color,s=e}i=0,a=e}btf.fpsId=l(d)};d(performance.now())}};window.btf={...window.btf,...e},Object.assign(window.btf,{currentVersion:e.currentVersion,universeId:e.universeId,snowId:e.snowId,map:e.map})})();