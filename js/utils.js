const btf={debounce:function(t,e,o){let n;return function(){const s=this,r=arguments,i=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||t.apply(s,r)}),e),i&&t.apply(s,r)}},throttle:function(t,e,o){let n,s,r,i=0;o||(o={});const a=function(){i=!1===o.leading?0:(new Date).getTime(),n=null,t.apply(s,r),n||(s=r=null)};return function(){const c=(new Date).getTime();i||!1!==o.leading||(i=c);const l=e-(c-i);s=this,r=arguments,l<=0||l>e?(n&&(clearTimeout(n),n=null),i=c,t.apply(s,r),n||(s=r=null)):n||!1===o.trailing||(n=setTimeout(a,l))}},sidebarPaddingR:()=>{const t=window.innerWidth,e=document.body.clientWidth,o=t-e;t!==e&&(document.body.style.paddingRight=o+"px")},snackbarShow:(t,e=!1,o=2e3)=>{const{position:n,bgLight:s,bgDark:r}=GLOBAL_CONFIG.Snackbar,i="light"===document.documentElement.getAttribute("data-theme")?s:r;Snackbar.show({text:t,backgroundColor:i,showAction:e,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(t,e=!1)=>{const o=new Date,n=new Date(t),s=o.getTime()-n.getTime(),r=36e5,i=24*r;let a;if(e){const t=s/(30*i),e=s/i,o=s/r,c=s/6e4;a=t>12?n.toLocaleDateString().replace(/\//g,"-"):t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.month:e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:o>=1?parseInt(o)+" "+GLOBAL_CONFIG.date_suffix.hour:c>=1?parseInt(c)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else a=parseInt(s/i);return a},loadComment:(t,e)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((t=>{t[0].isIntersecting&&(e(),o.disconnect())}),{threshold:[0]});o.observe(t)}else e()},scrollToDest:(t,e=500)=>{const o=window.pageYOffset;if(o>t&&(t-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:t,behavior:"smooth"});let n=null;t=+t,window.requestAnimationFrame((function s(r){n=n||r;const i=r-n;o<t?window.scrollTo(0,(t-o)*i/e+o):window.scrollTo(0,o-(o-t)*i/e),i<e?window.requestAnimationFrame(s):window.scrollTo(0,t)}))},animateIn:(t,e)=>{t.style.display="block",t.style.animation=e},animateOut:(t,e)=>{t.addEventListener("animationend",(function e(){t.style.display="",t.style.animation="",t.removeEventListener("animationend",e)})),t.style.animation=e},getParents:(t,e)=>{for(;t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null},siblings:(t,e)=>[...t.parentNode.children].filter((o=>e?o!==t&&o.matches(e):o!==t)),wrap:(t,e,o)=>{const n=document.createElement(e);for(const[t,e]of Object.entries(o))n.setAttribute(t,e);t.parentNode.insertBefore(n,t),n.appendChild(t)},unwrap:t=>{const e=t.parentNode;e!==document.body&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))},isHidden:t=>0===t.offsetHeight&&0===t.offsetWidth,getEleTop:t=>{let e=t.offsetTop,o=t.offsetParent;for(;null!==o;)e+=o.offsetTop,o=o.offsetParent;return e},loadLightbox:t=>{const e=GLOBAL_CONFIG.lightbox;if("mediumZoom"===e){const e=mediumZoom(t);e.on("open",(t=>{const o="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";e.update({background:o})}))}"fancybox"===e&&(t.forEach((t=>{if("A"!==t.parentNode.tagName){const e=t.dataset.lazySrc||t.src,o=t.title||t.alt||"";btf.wrap(t,"a",{href:e,"data-fancybox":"gallery","data-caption":o,"data-thumb":e})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(t){t.forEach((function(t){btf.isHidden(t)||fjGallery(t,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:t=>{if(t!==window.location.hash){t||(t=location.pathname);const e=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:e},e,t)}},linkCom:t=>{const e=document.querySelector(".el-textarea__inner");"bf"===t?(e.value="```yml\n",e.value+="- name: \n  link: \n  avatar: \n  descr: \n  siteshot: ",e.value+="\n```",e.setSelectionRange(15,15)):(e.value="站点名称：\n站点地址：\n头像链接：\n站点描述：\n站点截图：",e.setSelectionRange(5,5)),e.focus()}};Math.lerp=(t,e,o)=>(1-o)*t+o*e;const getStyle2=(t,e)=>{try{return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}catch(t){}return""};class Cursor{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(t,e){this.cursor.style.left=`${t}px`,this.cursor.style.top=`${e}px`}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));var t=document.getElementsByTagName("*");for(let e=0;e<t.length;e++)"pointer"==getStyle2(t[e],"cursor")&&this.pt.push(t[e].outerHTML);var e=map.get(localStorage.getItem("themeColor"));document.head.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='"+e+"'/></svg>\") 4 4, auto}"}refresh(){this.scr.remove(),this.cursor.classList.remove("hover"),this.cursor.classList.remove("active"),this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}init(){document.onmouseover=t=>this.pt.includes(t.target.outerHTML)&&this.cursor.classList.add("hover"),document.onmouseout=t=>this.pt.includes(t.target.outerHTML)&&this.cursor.classList.remove("hover"),document.onmousemove=t=>{null==this.pos.curr&&this.move(t.clientX-8,t.clientY-8),this.pos.curr={x:t.clientX-8,y:t.clientY-8},this.cursor.classList.remove("hidden")},document.onmouseenter=t=>this.cursor.classList.remove("hidden"),document.onmouseleave=t=>this.cursor.classList.add("hidden"),document.onmousedown=t=>this.cursor.classList.add("active"),document.onmouseup=t=>this.cursor.classList.remove("active")}render(){this.pos.prev?(this.pos.prev.x=Math.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=Math.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame((()=>this.render()))}}const CURSOR=new Cursor;window.CURSOR=CURSOR;