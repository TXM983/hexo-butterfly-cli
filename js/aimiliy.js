const scrollToTop=()=>{const e=document.getElementById("name-container"),t=document.getElementsByClassName("menus_items");t[1].classList.contains("visible")&&t[1].classList.remove("visible"),e.classList.contains("visible")||e.classList.add("visible"),btf.scrollToDest(0,500)},randomPost=()=>{fetch("/baidusitemap.xml").then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>{let t=e.querySelectorAll("url loc");for(;;){let e=t[Math.floor(Math.random()*t.length)].innerHTML;if(location.href!=e)return void pjax.loadUrl(e)}}))},changeMouseMode=btf.debounce((()=>{"on"===localStorage.getItem("mouse")?(localStorage.setItem("mouse","off"),btf.$notify("切换右键模式成功🍔","当前鼠标右键已恢复为系统默认！","success",2e3)):"off"===localStorage.getItem("mouse")&&(localStorage.setItem("mouse","on"),btf.$notify("切换右键模式成功🍔","当前鼠标右键已更换为网站指定样式！","success",2e3))}),300,!0),switchNightMode=()=>{const e=document.querySelector("body"),t=document.getElementById("modeiconT");e.insertAdjacentHTML("beforeend",'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"><div id="sun"></div><div id="moon"></div></div></div>'),setTimeout((function(){e.classList.contains("DarkMode")?e.classList.remove("DarkMode"):e.classList.add("DarkMode"),setTimeout((()=>{const e=document.getElementsByClassName("Cuteen_DarkSky")[0];e.style.transition="opacity 1s ease-in-out",e.style.opacity="0",setTimeout((()=>{e.remove()}),1e3)}),2e3)}),1e3);const n=document.getElementById("sun"),o=document.getElementById("moon");if("light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")){n.style.opacity="1",o.style.opacity="0",setTimeout((function(){n.style.opacity="0",o.style.opacity="1"}),1e3),activateDarkMode(),saveToLocal.set("theme","dark",.0416667),t?.setAttribute("xlink:href","#icon-sun"),window.cancelAnimationFrame(btf.snowId);const e=document.getElementById("snow");e.getContext("2d").clearRect(0,0,e.width,e.height),btf.snowId=null,btf.removeGlobalListener("snowMouseMove"),btf.removeGlobalListener("snowResize"),setTimeout((()=>{btf.$notify("关灯啦🌙","当前已成功切换至夜间模式！","success",3e3)}),2e3)}else{n.style.opacity="0",o.style.opacity="1",setTimeout((function(){n.style.opacity="1",o.style.opacity="0"}),1e3),activateLightMode(),saveToLocal.set("theme","light",.0416667),e.classList.add("DarkMode"),t?.setAttribute("xlink:href","#icon-moon"),window.cancelAnimationFrame(btf.universeId);const s=document.getElementById("universe");s.getContext("2d").clearRect(0,0,s.width,s.height),btf.universeId=null,btf.removeGlobalListener("resizef"),setTimeout((()=>{btf.$notify("开灯啦🌞","当前已成功切换至白天模式！","warning",3e3)}),2e3)}btf.checkWidth(),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)},share=btf.debounce((()=>{const e=`${window.location.origin}${window.location.pathname}`,t=document.title.trim(),n="| MuXiaoChen🍊",o=`MuXiaoChen🍊的站内分享\n标题：${t.endsWith(n)?t.slice(0,-14).trim():t}\n链接：${e}\n欢迎来访！🍭🍭🍭`;navigator.clipboard.writeText(o).then((()=>{btf.$notify("✅ 成功复制分享信息","您现在可以通过粘贴直接跟小伙伴分享了！","success",2e3)})).catch((e=>{console.error("❌ 复制失败：",e),btf.$notify("复制失败","请检查浏览器权限或是否使用了 HTTPS 协议","error",2e3)}))}),300,!0),checkAndShowHolidayMessage=()=>{const e=new Date,t=e.getMonth()+1,n=e.getDate(),o=e.getFullYear(),s=["非常抱歉，因为不可控原因，博客将于明天停止运营！","好消息，日本没了！","美国垮了，原因竟然是川普！","微软垮了！","你的电脑已经过载，建议立即关机！","你知道吗？站长很喜欢你哦！","一分钟有61秒哦","你喜欢的人跟别人跑了！"],a={10:{day:3,message:`祝祖国${o-1949}岁生日快乐！`},1:{day:1,message:`${o}年元旦快乐！🎉`},5:{day:19,message:`祝站长${o-2001}岁生日快乐！🍊`},4:{day:1,message:s[Math.floor(Math.random()*s.length)]}},l=[{month:"正月",day:["初一","初二","初三","初四","初五","初六"],message:`${o}年新年快乐\n🎊祝你心想事成，诸事顺利🎊`},{month:"腊月",day:["廿九","三十"],message:`${o}年新年快乐\n🎊祝你心想事成，诸事顺利🎊`},{month:"正月",day:["十五"],message:"元宵节快乐\n送你一个大大的灯笼🧅"},{month:"五月",day:["初五"],message:"端午节快乐\n请你吃一条粽子🍙"},{month:"七月",day:["初七"],message:"七夕节快乐\n黄昏后,柳梢头,牛郎织女来碰头"},{month:"八月",day:["十五"],message:"中秋节快乐\n请你吃一块月饼🍪"},{month:"九月",day:["初九"],message:"重阳节快乐\n独在异乡为异客，每逢佳节倍思亲"}],i=e=>{"1"!==sessionStorage.getItem("isPopupWindow")&&(getScript("https://cdn.aimiliy.top/npm/sweetalert2@8.19.0/sweetalert2.min.js").then((()=>{Swal.fire(e)})).catch((e=>console.error("SweetAlert2 加载失败:",e))),sessionStorage.setItem("isPopupWindow","1"))};a[t]&&a[t].day===n&&i(a[t].message);const r=e=>{l.forEach((t=>{t.month===e.IMonthCn&&t.day.includes(e.IDayCn)&&i(t.message)}))};let c;"object"==typeof calendarFormatter&&calendarFormatter.solar2lunar?(c=calendarFormatter.solar2lunar(o,t,n),r(c)):getScript("https://cdn.aimiliy.top/npm/js/lunar-calendar.js").then((()=>{c=calendarFormatter.solar2lunar(o,t,n),r(c)}))};checkAndShowHolidayMessage();const setCssVariable=(e,t)=>{document.documentElement.style.setProperty(e,t)},setFont=e=>{localStorage.setItem("font",e),setCssVariable("--global-font","default"===e?"-apple-system":e);try{setFontBorder()}catch(e){console.log("Setting font exception：",e)}},setFontBorder=()=>{var e="swf_"+localStorage.getItem("font");document.getElementById(e).style.border="2px solid var(--theme-color)",Array.prototype.forEach.call(document.getElementsByClassName("swf"),(function(t){t.id!=e&&(t.style.border="2px solid var(--border-color)")}))},setColor=e=>{localStorage.setItem("themeColor",e);const t=btf.map.get(e),n=`rgba${t.slice(3,-1)}, 0.7)`,o=`rgba${t.slice(3,-1)}, 0.5)`,s=`rgba${t.slice(3,-1)}, 0.1)`;setCssVariable("--theme-color",t),setCssVariable("--text-bg-hover",n),setCssVariable("--high-trans-color",o),setCssVariable("--hh-trans-color",s)},setUniverse=()=>{document.getElementById("universeSet").checked?(localStorage.setItem("universe","block"),btf.universeRunning=!0,btf.dark()):(btf.universeRunning=!1,btf.clearCanvas("universe","universeId"),localStorage.setItem("universe","none"),btf.removeGlobalListener("resizef"))},setSnow=()=>{document.getElementById("snowSet").checked?(localStorage.setItem("snow","block"),btf.snowRunning=!0,btf.snowflake()):(btf.snowRunning=!1,btf.clearCanvas("snow","snowId"),localStorage.setItem("snow","none"),btf.removeGlobalListener("snowMouseMove"),btf.removeGlobalListener("snowResize"))},fpssw=()=>{const e=document.getElementById("fpson"),t=document.getElementById("fps");e.checked?(localStorage.setItem("fpson","1"),t&&!t.classList.contains("fps-show")&&window.scrollY>0&&t.classList.add("fps-show")):(localStorage.setItem("fpson","0"),t&&t.classList.contains("fps-show")&&t.classList.remove("fps-show"))},setAside=()=>{const e=document.documentElement.classList;document.getElementById("asideSet").checked?(e.remove("hide-aside"),localStorage.setItem("aside","1")):(e.add("hide-aside"),localStorage.setItem("aside","0"))},setAsidePos=()=>{document.getElementById("asidePosSet").checked?(localStorage.setItem("asidePos","1"),setCssVariable("--first-child-order","0"),setCssVariable("--recent-post-item-margin","0 0 0 15px"),setCssVariable("--recent-post-item-margin-other","0 0 0 15px")):(localStorage.setItem("asidePos","0"),setCssVariable("--first-child-order","2"),setCssVariable("--recent-post-item-margin","0 15px 0 0"),setCssVariable("--recent-post-item-margin-other","0 15px 0 0"))},setNav=()=>{const e=document.documentElement.classList;document.getElementById("navSet").checked?(e.add("nav-sticky"),localStorage.setItem("nav","1")):(e.remove("nav-sticky"),localStorage.setItem("nav","0"))},toggleRightside=()=>{const e=document.getElementById("rightside");document.getElementById("rightSideSet").checked?(localStorage.setItem("rs","block"),!e.classList.contains("rightside-show")&&window.scrollY>0&&e.classList.add("rightside-show")):(localStorage.setItem("rs","none"),e.classList.contains("rightside-show")&&e.classList.remove("rightside-show"))},setTrans=()=>{const e=document.getElementById("transSet").value;document.querySelector(".transValue").innerHTML='卡片透明度 (0%-100%): <span style="color:#eb5353">'+e+"%</span>",localStorage.setItem("transNum",e),document.querySelector("#rang_trans").style.width=.95*e+"%",setCssVariable("--trans-light",`rgba(253, 253, 253, ${e}% )`),setCssVariable("--trans-dark",`rgba(20, 24, 30, ${e}% )`),setCssVariable("--trans-comment-dark",`rgba(28, 32, 40, ${e}% )`)},setBgFilter=()=>{const e=document.getElementById("blurSet").value;document.querySelector(".blurValue").innerHTML='模糊半径 (开启模糊生效 0px-100px): <span style="color:#eb5353">'+e+"px</span>",localStorage.setItem("blurRad",e),document.querySelector("#rang_blur").style.width=.95*e+"%",setCssVariable("--blur-num",`blur(${e}px) saturate(120%) contrast(105%)`)},setBlur=()=>{const e=document.documentElement.classList;document.getElementById("blur").checked?(localStorage.setItem("blur","1"),e.add("bg-filter")):(localStorage.setItem("blur","0"),e.remove("bg-filter"))};let defineColor=localStorage.getItem("blogbg")&&"#"==localStorage.getItem("blogbg").charAt(0)?localStorage.getItem("blogbg"):"#F4D88A";const changeBgColor=()=>{changeBg(document.querySelector("#define_colors").value)};let bingDayBg=screen.width<=768?"url(https://bing.img.run/m.php)":"url(https://bing.img.run/1920x1080.php)",bingHistoryBg=screen.width<=768?"url(https://bing.img.run/rand_m.php)":"url(https://bing.img.run/rand.php)",EEEDog="url(https://api.horosama.com/random.php)",seovx="url(https://cdn.seovx.com/?mom=302)",picsum="url(https://www.loliapi.com/bg/)",waiBizhi="url(https://img.aimiliy.top/wallpaper?type=pc)",btstu="url(https://img.paulzzh.com/touhou/random)",unsplash="url(https://api.likepoems.com/img/pc)";const resetBg_=()=>{const e={"--default-bg":"url(https://img.aimiliy.top/wallpaper?type=pc)","--darkmode-bg":"url(https://img.aimiliy.top/wallpaper?type=pc)","--mobileday-bg":"url(https://cdn.aimiliy.top/backImg/418aa5a692048078aec56e073ed15e8849ff99a012daa8-4Bc9wf.webp)","--mobilenight-bg":"url(https://cdn.aimiliy.top/backImg/20191012131221_mTGle.webp)"};for(const[t,n]of Object.entries(e))setCssVariable(t,n)},changeBg=e=>{defineColor="#"==e.charAt(0)?e:"#F4D88A",setBg(e),localStorage.setItem("blogbg",e)},setBg=e=>{["--default-bg","--darkmode-bg","--mobileday-bg","--mobilenight-bg"].forEach((t=>{setCssVariable(t,`${e}`)}))},getPicture=btf.debounce((()=>{const e=document.getElementById("pic-link");if(!e)return;const t=e.value.trim();t?checkImgExists(t).then((()=>{changeBg(`url(${t})`),btf.$notify("可以啦🍨","切换自定义背景成功！","success",3e3)})).catch((()=>{btf.$notify("链接不对🤣","请输入有效的图片链接","error",3e3)})):btf.$notify("😅 空链接","请输入图片链接","warning",3e3)}),300,!0),checkImgExists=e=>new Promise((function(t,n){const o=new Image;o.src=e,o.onload=e=>{t(e)},o.onerror=e=>{n(e)}})),setLight=()=>{const e=document.getElementById("lightSet").checked;changeLight(e),localStorage.setItem("light",e?"true":"false")},changeLight=e=>{document.documentElement.classList.toggle("animate",e),setCssVariable("--menu-shadow",e?"0 0 1px var(--theme-color)":"none")},getWinboxSize=()=>{const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e<=768?.9*e+"px":.6*e+"px",height:e<=768?.9*t+"px":.7*t+"px"}};let winbox="";const createWinbox=async()=>{const{width:e,height:t}=getWinboxSize(),n=btf.throttle((()=>{winResize()}),100,{leading:!0,trailing:!0});winbox=WinBox({id:"meihuaBox",index:101,title:"美化设置",border:"4",x:"center",y:"center",width:e,height:t,background:"var(--theme-color)",onmaximize:()=>{document.body.classList.add("no-scroll")},onrestore:()=>{document.body.classList.remove("no-scroll")},onclose:function(e){if(e)return!1;document.body.classList.remove("no-scroll"),btf.removeGlobalListener("onThrottleResize");const t=this.g;return t.classList.add("winbox-closing"),t.addEventListener("animationend",(()=>{this.close(!0)}),{once:!0}),!0}}),btf.addGlobalListener("resize",window,n,"onThrottleResize");const o=localStorage.getItem("blurRad")||20,s=localStorage.getItem("transNum")||95,a=.95*s,l=.95*o,i=document.querySelector(".wb-body");i.classList.add("wb-loading-bg"),winbox.body.innerHTML=' \n       <div id="music-loading" class="music-loading-animation">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>';let r="",c="",d="",m="",g="",u="";fetch("https://cdn.aimiliy.top/npm/json/winbox.json").then((e=>e.json())).then((e=>{for(const t in e){const n=e[t];"animate"===t?r=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="imgbox"\n                     style="background-image:url(${e.url})"\n                     onclick="changeBg('url(${e.url})')"\n                     title="${e.title||""}">\n                  </a>`)).join(""):"landscape"===t?c=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="imgbox"\n                     style="background-image:url(${e.url})"\n                     onclick="changeBg('url(${e.url})')"\n                     title="${e.title||""}">\n                  </a>`)).join(""):"pet"===t?d=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="imgbox"\n                     style="background-image:url(${e.url})"\n                     onclick="changeBg('url(${e.url})')"\n                     title="${e.title||""}">\n                  </a>`)).join(""):"gradient"===t?m=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="box"\n                     style="background: ${e.url}"\n                     onclick="changeBg('${e.url}')">\n                  </a>`)).join(""):"purity"===t?(g=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="box"\n                     style="background: ${e.url}"\n                     onclick="changeBg('${e.url}')">\n                  </a>`)).join(""),g+=`<input type="color" id="define_colors" href="javascript:;" rel="noopener external nofollow" class="box" autocomplete="on" value="${defineColor}" oninput="changeBgColor()">`):"phone"===t&&(u=n.map((e=>`\n                  <a href="javascript:;" \n                     rel="noopener external nofollow"\n                     class="pimgbox"\n                     style="background-image:url(${e.url})"\n                     onclick="changeBg('url(${e.url})')"\n                     title="${e.title||""}">\n                  </a>`)).join(""))}i.classList.remove("wb-loading-bg"),winbox.body.innerHTML=`\n        <div class="settings" style="display: block;">\n          <div id="article-container" style="padding:12px;" class="container">\n          <br>\n          <center><p><button onclick="reset()" class="winbox-button-reset"><i class="fa-solid fa-arrows-rotate"></i>&nbsp;恢复默认设置</button></p></center>\n          \n          <h2>一、显示偏好</h2>\n          \n          <div class="transValue" id="transVal" style="font-weight:bold;padding-left:10px">卡片透明度 (0%-100%): <span\n                          style="color:#eb5353">${s}%</span></div>\n          <div class="range">\n            <input id="transSet" type="range" min="0" max="100" step="1" value=${s} oninput="setTrans()">\n            <p class="rang_width" id="rang_trans" style="width:${a}%"></p>\n          </div>\n          \n          <div class="blurValue" id="rangVal" style="font-weight:bold;padding-left:10px">模糊半径 (开启模糊生效 0px-100px): <span\n           style="color:#eb5353">${o}px</span></div>\n          <div class="range">\n            <input id="blurSet" type="range" min="0" max="100" step="1" value="${o}" oninput="setBgFilter()">\n            <p class="rang_width" id="rang_blur" style="width:${l}%"></p>\n          </div>\n          \n          \n          <div class="content" style="display:flex">\n            <div class="content-text" style="font-weight:bold; padding-left:10px"> 星空特效 (夜间模式) </div><input type="checkbox" id="universeSet" onclick="setUniverse()">\n            <div class="content-text" style="font-weight:bold; padding-left:20px"> 霓虹夜灯 (夜间模式) </div><input type="checkbox" id="lightSet" onclick="setLight()">\n          </div>\n          \n          <div class="content" style="display:flex">\n            <div class="content-text" style="font-weight:bold; padding-left:10px"> 模糊效果 (消耗性能) </div><input type="checkbox" id="blur" onclick="setBlur()">\n            <div class="content-text" style="font-weight:bold; padding-left:20px"> 右侧部件 (默认开启) </div><input type="checkbox" id="rightSideSet" onclick="toggleRightside()">\n          </div>\n          \n          <div class="content" style="display:flex">\n            <div class="content-text" style="font-weight:bold; padding-left:10px"> 帧率监测 (默认开启) </div><input type="checkbox" id="fpson" onclick="fpssw()">\n            <div class="content-text" style="font-weight:bold; padding-left:20px"> 雪花特效 (白天模式) </div><input type="checkbox" id="snowSet" onclick="setSnow()">\n          </div>\n          \n          <div class="content" style="display:flex">\n            <div class="content-text" style="font-weight:bold; padding-left:10px"> 侧栏显隐 (默认显示)</div>\n            <input type="checkbox" id="asideSet" onclick="setAside()">\n            <div class="content-text" style="font-weight:bold; padding-left:20px"> 侧栏位置 (默认右边)</div>\n            <input type="checkbox" id="asidePosSet" onclick="setAsidePos()">\n          </div>\n          \n          <div class="content" style="display:flex">\n            <div class="content-text" style="font-weight:bold; padding-left:10px"> 顶栏吸附 (默认关闭)</div>\n            <input type="checkbox" id="navSet" onclick="setNav()">\n            <div class="content-text" style="font-weight:bold; padding-left:20px"> 其他功能 (敬请期待)</div>\n            <input type="checkbox" id="others" disabled>\n          </div>\n                  \n                  \n          <h2>二、字体设置</h2>\n          <div class="note warning modern"><p>非商免字体未经授权只能个人使用。本站为完全非商业、非盈利性质的网站，平时用于个人学习交流，如有侵权请联系站长删除，谢谢！ —— 致版权方</p>\n</div>\n          <p id="swfs">\n            <a class="swf" id="swf_ZhuZiAWan" href="javascript:;" rel="noopener external nofollow" style="font-family:'ZhuZiAWan'!important;color:black" onclick="setFont('ZhuZiAWan')">筑紫A丸标准体2.0</a>\n            <a class="swf" id="swf_HYTMR" href="javascript:;" rel="noopener external nofollow" style="font-family:'HYTMR'!important;color:black" onclick="setFont('HYTMR')">汉仪唐美人</a>\n            <a class="swf" id="swf_LXGW" href="javascript:;" rel="noopener external nofollow" style="font-family:'LXGW'!important;color:black" onclick="setFont('LXGW')">霞鹜文楷</a>\n            <a class="swf" id="swf_TTQHB" href="javascript:;" rel="noopener external nofollow" style="font-family:'TTQHB'!important;color:black" onclick="setFont('TTQHB')">甜甜圈海报</a>\n            <a class="swf" id="swf_YSHST" href="javascript:;" rel="noopener external nofollow" style="font-family:'YSHST'!important;color:black" onclick="setFont('YSHST')">优设好身体</a>\n            <a class="swf" id="swf_MiSans" href="javascript:;" rel="noopener external nofollow" style="font-family:'MiSans'!important;color:black" onclick="setFont('MiSans')">MiSans</a>\n            <a class="swf" id="swf_default" href="javascript:;" rel="noopener external nofollow" style="font-family:-apple-system, IBM Plex Mono ,monosapce,'微软雅黑', sans-serif;!important;color:black" onclick="setFont('default')">系统默认</a>\n          </p>\n          \n          <h2>三、主题色设置</h2>\n          <div class="content" style="display:flex">\n            <input type="radio" id="red" name="colors" value=" " onclick="setColor('red')">\n            <input type="radio" id="orange" name="colors" value=" " onclick="setColor('orange')">\n            <input type="radio" id="yellow" name="colors" value=" " onclick="setColor('yellow')">\n            <input type="radio" id="green" name="colors" value=" " onclick="setColor('green')">\n            <input type="radio" id="blue" name="colors" value=" " onclick="setColor('blue')">\n            <input type="radio" id="heoblue" name="colors" value=" " onclick="setColor('heoblue')">\n            <input type="radio" id="darkblue" name="colors" value=" " onclick="setColor('darkblue')">\n            <input type="radio" id="purple" name="colors" value=" "  onclick="setColor('purple')">\n            <input type="radio" id="pink" name="colors" value=" " onclick="setColor('pink')" checked="checked">\n            <input type="radio" id="black" name="colors" value=" " onclick="setColor('black')">\n            <input type="radio" id="blackgray" name="colors" value=" " onclick="setColor('blackgray')">\n          </div>\n          \n          <h2>四、背景设置</h2>\n          <center><button onclick="resetBg()" class="winbox-button-resetBg"><i class="fa-solid fa-arrows-rotate"></i>&nbsp;恢复默认背景</button></center>\n          \n          <h3>1. 二次元</h3>\n          <details class="folding-tag" cyan><summary> 查看二次元背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${r}</div>\n              </div>\n            </details>\n          \n          <h3>2. 风景</h3>\n          \n          <details class="folding-tag" cyan><summary> 查看风景背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${c}</div>\n              </div>\n            </details>\n          \n          <h3>3. 萌宠</h3>\n          \n          <details class="folding-tag" cyan><summary> 查看萌宠背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${d}</div>\n              </div>\n            </details>\n          \n          <h3>4. 渐变色</h3>\n          \n          <details class="folding-tag" cyan><summary> 查看渐变色背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${m}</div>\n              </div>\n            </details>\n          \n          <h3>5. 纯色</h3>\n          \n          <details class="folding-tag" cyan><summary> 查看纯色背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${g}</div>\n              </div>\n            </details>\n          \n          <h3>6. 适配手机</h3>\n          \n          <details class="folding-tag" cyan><summary> 查看适配手机的背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden">${u}</div>\n              </div>\n            </details>\n          \n          <h3>7. 壁纸API</h3>\n          <details class="folding-tag" cyan><summary> 查看壁纸API系列背景 </summary>\n              <div class='content'>\n              <div class="bgbox hidden"><a id="bingDayBox" rel="noopener external nofollow" style="background-image: ${bingDayBg}" class="box apiBox" onclick="changeBg('${bingDayBg}')"></a><a id="bingHistoryBox" rel="noopener external nofollow" style="background-image: ${bingHistoryBg}" class="box apiBox" onclick="changeBg('${bingHistoryBg}')"></a><a id="EEEDogBox" rel="noopener external nofollow" style="background-image: ${EEEDog}" class="box apiBox" onclick="changeBg('${EEEDog}')"></a><a id="seovxBox" rel="noopener external nofollow" style="background-image: ${seovx}" class="box apiBox" onclick="changeBg('${seovx}')"></a><a id="picsumBox" rel="noopener external nofollow" style="background-image: ${picsum}" class="box apiBox" onclick="changeBg('${picsum}')"></a><a id="waiBizhiBox" rel="noopener external nofollow" style="background-image: ${waiBizhi}" class="box apiBox" onclick="changeBg('${waiBizhi}')"></a><a id="btstuBox" rel="noopener external nofollow" style="background-image: ${btstu}" class="box apiBox" onclick="changeBg('${btstu}')"></a><a id="unsplashBox" rel="noopener external nofollow" style="background-image: ${unsplash}" class="box apiBox" onclick="changeBg('${unsplash}')"></a></div>\n              </div>\n            </details>\n          \n          <h3>8. 自定义背景</h3>\n          <details class="folding-tag" cyan><summary> 设置自定义背景 </summary>\n              <div class='content'>\n              <p style="text-align: center;">  <input type="text" id="pic-link" size="70%" maxlength="1000" placeholder="请输入有效的图片链接，如 https://cdn.aimiliy.top/backImg/c0dd2053b27e4957af8aedd5fe3ca485.webp"></p><p style="text-align: center;">  <button type="button" onclick="getPicture()" style="background:var(--theme-color); width:35%; padding: 5px 0 7px 0; border-radius:30px; color:white; line-height:2;">🌈切换背景🌈</button></p>\n              </div>\n            </details>\n          <br>\n          \n          <center><div style="font-size:1.2em;color:var(--theme-color);font-weight:bold;">------ ( •̀ ω •́ )y 到底啦 ------</div></center>\n          <br>\n          \n          </div>  \n        </div>`;const t={themeColor:localStorage.getItem("themeColor"),blur:"blur",universe:"universeSet",fpson:"fpson",rs:"rightSideSet",light:"lightSet",snow:"snowSet",aside:"asideSet",asidePos:"asidePosSet",nav:"navSet"};setFontBorder();for(let e in t){const o=t[e],s=localStorage.getItem(e);if("themeColor"===e){const e=document.getElementById(o);e&&(e.checked=!0)}else n=o,p=s,document.getElementById(n).checked="1"===p||"block"===p||"true"===p}var n,p;const b={attributes:!0,attributeFilter:["open"]},h=document.querySelectorAll(".wb-body .folding-tag"),y=new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"open"===e.attributeName){const t=e.target.getElementsByClassName("bgbox");Array.from(t).forEach((t=>{e.target.hasAttribute("open")?t.classList.remove("hidden"):t.classList.add("hidden")}))}}))}));h.forEach((e=>{y.observe(e,b)}))})).catch((e=>{winbox.body.innerHTML='<div class="error">设置面板加载失败，请检查网络连接</div>',console.error("设置面板加载失败",e)}))},uiUtils={show:e=>document.getElementById(e).style.display="block",hide:e=>document.getElementById(e).style.display="none",toggle:(e,t)=>document.getElementById(e).style.display=t?"block":"none",setCSS:(e,t)=>document.getElementById(e).textContent=t,setHTML:(e,t)=>document.getElementById(e).innerHTML=t,setValue:(e,t)=>document.getElementById(e).value=t,setChecked:(e,t=!0)=>document.getElementById(e).checked=t,setWidth:(e,t)=>document.getElementById(e).style.width=`${t}%`,addClass:(e,...t)=>document.getElementById(e).classList.add(...t),removeClass:(e,...t)=>document.getElementById(e).classList.remove(...t),replaceClass:(e,t,n)=>{const o=document.getElementById(e);o.classList.remove(t),o.classList.add(n)}},uiStateManager={reset:async()=>{const e={trans:85,blur:20,font:"LXGW",color:"green",music:{id:"7397995017",type:"playlist",server:"tencent"},checkList:{green:!0,universeSet:!0,fpson:!0,rightSideSet:!0,lightSet:!0,snowSet:!1,navSet:!1,asideSet:!0,asidePosSet:!0,blur:!1},checkboxMethods:{universeSet:setUniverse,fpson:fpssw,rightSideSet:toggleRightside,lightSet:setLight,snowSet:setSnow,navSet:setNav,asideSet:setAside,asidePosSet:setAsidePos,blur:setBlur}};btf.initItem(e.music),setFont(e.font),setColor(e.color),setCssVariable("--trans-light",`rgba(253, 253, 253, ${e.trans}% )`),setCssVariable("--trans-dark",`rgba(20, 24, 30, ${e.trans}% )`),setCssVariable("--trans-comment-dark",`rgba(28, 32, 40, ${e.trans}% )`),setCssVariable("--blur-num",`blur(${e.blur}px) saturate(120%) contrast(105%)`);const t=.95*e.trans,n=.95*e.blur;uiUtils.setValue("transSet",e.trans),uiUtils.setValue("blurSet",e.blur),uiUtils.setHTML("transVal",`卡片透明度 (0%-100%): <span style="color:#eb5353">${e.trans}%</span>`),uiUtils.setHTML("rangVal",`模糊半径 (开启模糊生效 0px-100px): <span style="color:#eb5353">${e.blur}px</span>`),uiUtils.setWidth("rang_trans",t),uiUtils.setWidth("rang_blur",n),Object.entries(e.checkList).forEach((([t,n])=>{uiUtils.setChecked(t,n),e.checkboxMethods[t]&&e.checkboxMethods[t]()})),resetBg_(),await new Promise((e=>{setTimeout((()=>{btf.$notify("提示🍅","当前已经恢复为默认设置！","warning",3e3),e()}),300)}))}},reset=btf.debounce((async()=>{await uiStateManager.reset()}),300,!0),resetBg=btf.debounce((()=>{localStorage.setItem("blogbg","default"),resetBg_()}),300,!0),winResize=()=>{try{document.body.classList.remove("no-scroll");const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;e<=768?winbox.resize(.9*e+"px",.9*t+"px").move("center","center"):winbox.resize(.6*e+"px",.7*t+"px").move("center","center")}catch(e){console.log("Pjax加载WinBox异常：",e)}},toggleWinbox=()=>{document.querySelector("#meihuaBox")?winbox.close():getScript("https://cdn.aimiliy.top/npm/js/winbox.bundle.min.js").then(createWinbox)};