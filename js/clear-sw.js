window.addEventListener("load",(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((r=>{0!==r.length?r.forEach((r=>{r.unregister().then((r=>{console.log(r?"Service Worker 已卸载":"Service Worker 卸载失败"),r&&e()})).catch((e=>{console.error("卸载 Service Worker 失败",e)}))})):console.log("没有注册的 Service Worker，跳过清除操作")})).catch((e=>{console.error("获取 Service Worker 注册失败",e)}));const e=()=>{"caches"in window&&caches.keys().then((e=>{e.forEach((e=>{caches.delete(e).then((r=>{console.log(r?`缓存 "${e}" 已删除`:`缓存 "${e}" 删除失败`)}))}))})).catch((e=>console.error("删除缓存失败",e))),setTimeout((()=>{location.reload()}),1e3)}}));